"use strict";angular.module("turingEditorApp",["Config","ngAnimate","ngCookies","ngStorage","ngResource","ngSanitize","ngMaterial","ui.router","ui.codemirror","angularScratchblocks","btford.markdown","ngTable","ngTagsInput","ngFileUpload","angular-sortable-view","anguvideo","utilities"]),angular.module("turingEditorApp").config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("home",{url:"/",templateUrl:"views/home/home.html",controller:"HomeController",access:{auth:!1}}).state("login",{url:"/login?next",templateUrl:"views/login/login.html",controller:"LoginController",controllerAs:"login",access:{auth:!1}}).state("learn",{url:"/learn",template:'<div ui-view="main" class="main"></div>',"abstract":!0}).state("learn.home",{url:"/:tab",views:{main:{templateUrl:"views/learn/home.html",controller:"LearnHomeController"}},access:{auth:!0,role:"student"}}).state("learn.group",{url:"/group/:group",views:{main:{templateUrl:"views/learn/group.html",controller:"LearnGroupController"}},access:{auth:!0,role:"student"}}).state("learn.brick",{url:"/brick/:left/:right",views:{main:{templateUrl:"views/learn/brick.html",controller:"LearnBrickController"}},access:{auth:!0,role:"student"}}).state("edit",{url:"/edit",template:'<div ui-view="main" class="main"></div>',"abstract":!0}).state("edit.home",{url:"/",views:{main:{templateUrl:"views/edit/home.html",controller:"EditHomeController"}},access:{auth:!0,role:"admin"}}).state("edit.groups",{url:"/groups",views:{main:{templateUrl:"views/edit/groups/groups.html",controller:"EditGroupsController"}},access:{auth:!0,role:"admin"}}).state("edit.group",{url:"/group/:group",views:{main:{templateUrl:"views/edit/group/group.html",controller:"EditGroupController"}},resolve:{group:["$stateParams","Group",function(a,b){return b.get({id:a.group})}]},access:{auth:!0,role:"admin"}}).state("edit.group.students",{url:"/students",views:{main:{templateUrl:"views/edit/group/students.html",controller:"EditGroupStudentsController"}},access:{auth:!0,role:"admin"}}).state("edit.group.bricks",{url:"/bricks",views:{main:{templateUrl:"views/edit/group/bricks.html",controller:"EditGroupBricksController"}},access:{auth:!0,role:"admin"}}).state("edit.group.assign",{url:"/assign",views:{main:{templateUrl:"views/edit/group/assign.html",controller:"EditGroupAssignController"}},access:{auth:!0,role:"admin"}}).state("edit.bricks",{url:"/bricks/:purpose?tags?signal",views:{main:{templateUrl:"views/edit/bricks/bricks.html",controller:"EditBricksController"}},access:{auth:!0,role:"admin"}}).state("edit.brick",{url:"/brick/:brick",views:{main:{templateUrl:"views/edit/brick/main.html",controller:"EditBrickController"}},resolve:{brick:["$stateParams","Brick",function(a,b){return b.get({id:a.brick})}]},"abstract":!0}).state("edit.brick.home",{url:"/",views:{main:{templateUrl:"views/edit/brick/home.html",controller:"EditBrickHomeController"}},access:{auth:!0,role:"admin"}}).state("edit.brick.bricks",{url:"/bricks/:purpose?tags?signal?brick_index",views:{main:{templateUrl:"views/edit/brick/bricks.html",controller:"EditBrickBricksController"}},access:{auth:!0,role:"admin"}}).state("edit.brick.resource",{url:"/resource/:resource?format",views:{main:{templateUrl:"views/edit/brick/resource.html",controller:"EditBrickResourceController"}},access:{auth:!0,role:"admin"}}).state("edit.brick.resources",{url:"/resources/:format?tags?brick_index?piece_index",views:{main:{templateUrl:"views/edit/brick/resources.html",controller:"EditBrickResourcesController"}},access:{auth:!0,role:"admin"}})}]),angular.module("turingEditorApp").config(["$httpProvider","$mdThemingProvider",function(a,b){a.interceptors.push("Interceptor"),b.theme("success-toast"),b.theme("danger-toast")}]).factory("Interceptor",["$cookieStore",function(a){return{request:function(b){return b.headers=b.headers||{},a.get("token")&&(b.headers.Authorization="Bearer "+a.get("token")),b}}}]).run(["$rootScope","Principal","Authorization",function(a,b,c){a.$on("$stateChangeStart",function(b,d,e){a.next=d,c.authorize()})}]),angular.module("turingEditorApp").directive("brickAttrs",function(){function a(a){function b(){function a(){c.attrs=d.map(function(a){return new f(a)})}c.brick.$promise?c.brick.$promise.then(function(){a()}):a()}var c=this,d=["purpose","signal","handler","audience"],e={icon:"ion-alert-circled",label:"None"},f=function(a){this.name=a,this.attr=c.brick[a]||e};a.$watch(c.brick,b)}return a.$inject=["$scope"],{templateUrl:"components/brick-attrs/brick-attrs.html",restrict:"E",replace:!0,controller:a,controllerAs:"brick_attrs",bindToController:{brick:"=brick"},scope:{}}}),angular.module("turingEditorApp").directive("brickBrowser",function(){function a(a,b){function c(){console.log(e),d.bricks=b.query(e)}var d=this;this.tags=this.tags||[],this.signal=this.signal||"",this.purpose=this.purpose||"project",this.tag_objects=this.tags.map(function(a){return{text:a}});var e={tags:[],limit:10,purpose:this.purpose},f=b.get_purposes();this.signals=["code","design","learn"];var g=function(a){this.label=a.label||"",this.icon=a.icon||"ion-ionic"};g.prototype.click=function(){d.purpose=this.label,e.purpose=this.label,c()},g.prototype.style=function(){return d.purpose===this.label?"active":void 0},this.buttons=f.map(function(a){return new g(a)}),a.$watch(function(){return d.tag_objects},function(a){var b=a.map(function(a){return a.text});d.tags=b,e.tags=b,c()},!0),a.$watch(function(){return d.signal},function(a){e.signal=a,e.signal.length||delete e.signal,c()},!0)}return a.$inject=["$scope","Brick"],{templateUrl:"components/brick-browser/brick-browser.html",restrict:"E",controller:a,controllerAs:"brick_browser",bindToController:{open_brick:"=openBrick",draggable:"=draggable",purpose:"=purpose",signal:"=signal",tags:"=tags"},scope:{}}}),angular.module("turingEditorApp").directive("brickCard",function(){function a(a,b,c){function d(){return f.brick.action=f.brick.action||{},f.brick.action.completed?"completed":f.brick.action.started?"started":f.brick.action.opened?"opened":void 0}console.log(this.editable);var e,f=this;f.settings={show:!1,toggle:function(){this.show=!this.show}};var g=c.get_purposes();f.purposes=g.map(function(a){return a.label});var h=c.get_signals();f.signals=h.map(function(a){return a.label}),a.$watch(function(){return f.brick.signal},function(a){f.signal=c.get_signal(a)});var i=c.get_displays();f.displays=i.map(function(a){return a.label});var j=c.get_audiences();f.audiences=j.map(function(a){return a.label});var k=c.get_handlers();f.handlers=k.map(function(a){return a.label}),f.edit_resource=function(a){b.go("edit.brick.resource",{resource:a._id,format:b.params.format,tags:b.params.tags})},f.add_piece=function(){var a={data:{}};f.brick.pieces.push(a),f.edit_piece(a)},f.edit_piece=function(a){e=f.editing_piece(a)?null:a},f.remove_piece=function(a){var b=f.brick.pieces.findIndex(function(b){return a._id===b._id});b>-1&&(f.brick.pieces.splice(b,1),f.brick.$save())},f.accept_piece_edit=function(){e=null,f.brick.$save()},f.cancel_piece_edit=function(){e=null,f.brick=c.get({id:f.brick._id})},f.editing_piece=function(a){return a===e},f.save_brick=function(){e=null,console.log(f.brick.purpose),f.brick.$save()},f.action={show:function(){return!0},text:function(){var a=d();return"completed"===a?"Completed":"started"===a?"Started":"opened"===a?"Opened":void 0},style:function(){var a=d();return"completed"===a?"btn-success":"started"===a?"btn-primary":"opened"===a?"btn-secondary":void 0}};var l=function(a){this.exists=a&&a.handler,angular.extend(this,a)};this.brick=this.brick||{};var m=new l(this.brick.handler);f.handler={show:function(){return m.exists&&"checkmark"===m.handler},style:function(){var a=[],b=d();return"checkmark"==m.handler&&("completed"==b?(a.push("text-primary"),a.push("ion-ios-checkmark")):(a.push("text-default"),a.push("ion-ios-circle-outline"))),a.join(" ")},click:function(){d();"checkmark"==m.handler&&(f.brick.action.completed=!f.brick.action.completed),f.brick.$action()}},f.body={style:function(){var a=[];return f.active&&a.push("active"),f.handler.show()&&a.push("padding-left"),f.opener.show()&&(a.push("clickable"),a.push("padding-right")),a.join(" ")}},f.opener={show:function(){var a=f.open,b=f.brick;return a&&b&&b.bricks&&b.bricks.length},style:function(){var a=f.brick;return a.purpose&&"help"===a.purpose.purpose?"ion-help":"ion-chevron-right"},click:function(){f.open(f.brick)}}}return a.$inject=["$scope","$state","Brick"],{templateUrl:"components/brick-card/brick-card.html",restrict:"E",replace:!0,controller:a,controllerAs:"brick_card",bindToController:{active:"=active",brick:"=brick",open:"=openBrick",editable:"=editable"},scope:{}}}),angular.module("turingEditorApp").directive("brickDisplay",function(){function a(a,b){var c=this;console.log("dispaly drag edit",this.draggable,this.editable),console.log(this.brick),this.open_brick=function(a){c.navigable&&(c.brick=b.get({id:a._id}))}}return a.$inject=["$scope","Brick"],{templateUrl:"components/brick-display/brick-display.html",restrict:"E",replace:!0,controller:a,controllerAs:"brick_display",bindToController:{brick:"=brick",draggable:"=draggable",navigable:"=navigable",editable:"=editable"},scope:{}}}),angular.module("turingEditorApp").directive("brickViewer",function(){function a(a){}return a.$inject=["$scope"],{templateUrl:"components/brick-viewer/brick-viewer.html",restrict:"E",replace:!0,controller:a,controllerAs:"brick_viewer",bindToController:{brick:"=brick",layout:"=layout"},scope:{}}}),angular.module("turingEditorApp").directive("buttonCard",function(){return{templateUrl:"components/button-card/button-card.html",restrict:"E",scope:{title:"=title",text:"=text",button:"=button"}}}),angular.module("turingEditorApp").directive("checkmarkEditor",function(){return{templateUrl:"components/checkmark-editor/checkmark-editor.html",restrict:"E",scope:{heading:"=heading",checkmark:"=checkmark"}}}),angular.module("turingEditorApp").directive("codeDisplay",function(){function a(a){function b(){var b=a.data.language;"html"===b&&(b="htmlmixed"),c&&c.setOption("mode",b)}var c;a.$watch("data.language",b),a.options={readOnly:"nocursor",viewportMargin:1/0,onLoad:function(a){c=a,c.on("mousedown",function(a,b){b.preventDefault()}),b()}},a.display={scratchblock:function(){return"scratch"===a.data.language},codemirror:function(){return!this.scratchblock()}}}return a.$inject=["$scope"],{templateUrl:"components/code-display/code-display.html",restrict:"AE",controller:a,scope:{data:"=data"}}}),angular.module("turingEditorApp").directive("codeEditor",function(){function a(){var a=this,b=function(){};this.languages=["python","scratch","html","css","javascript"],this.data.language=this.data.language||this.languages[0],this.options={keyMap:"sublime",lineNumbers:!0,lineWrapping:!0,onLoad:function(c){c.setOption("lineWrapping",!0),b=function(){var b=a.data.language;"html"===b&&(b="htmlmixed"),c.setOption("mode",b)}}}}return{templateUrl:"components/code-editor/code-editor.html",restrict:"E",replace:!0,controller:a,controllerAs:"code_editor",bindToController:{data:"=data"},scope:{}}}),angular.module("turingEditorApp").directive("componentCard",["Editor",function(a){function b(b){b.editor=a,b.hidden={toggle:function(){b.component.hidden.show=!b.component.hidden.show}},b.checkmark={toggle:function(){b.component.action.completed=!b.component.action.completed,b.component.update()}},b.detailStyle=function(){return b.component&&(b.component.checkmark||b.component.hidden&&b.component.hidden.active||b.editor.show())?"padding":void 0},b.showHidden=function(){return b.component&&b.component.hidden&&b.component.hidden.active&&b.component.hidden.show}}return b.$inject=["$scope"],{templateUrl:"components/component-card/component-card.html",restrict:"E",controller:b,scope:{component:"=component"}}}]),angular.module("turingEditorApp").directive("componentDetailsEditor",function(){function a(a){a.$watch("component",function(a){})}return{templateUrl:"components/component-details-editor/component-details-editor.html",restrict:"E",link:a,scope:{component:"=component"}}}),angular.module("turingEditorApp").directive("componentDetails",function(){function a(a){a.image={style:function(){return a.component.image.active&&"thumbnail"==a.component.image.display&&a.component.text.active?"cd-thumbnail":a.component.image.active&&"cover"==a.component.image.display&&a.component.text.active?"cd-cover":void 0}},a.text={style:function(){return a.component.image.active&&a.component.text.active?"thumbnail"==a.component.image.display?"cd-text-min":"cd-text":void 0}}}return a.$inject=["$scope"],{templateUrl:"components/component-details/component-details.html",restrict:"E",controller:a,scope:{component:"=component"}}}),angular.module("turingEditorApp").directive("componentEditor",function(){function a(a){a.$watch("component",function(b){console.log(b),b=b||{},a.displayComponent={},angular.copy(a.component,a.displayComponent)}),a.save=function(){angular.copy(a.displayComponent,a.component),a.component.$save()}}return{templateUrl:"components/component-editor/component-editor.html",restrict:"E",link:a,scope:{component:"=component",save:"=save"}}}),angular.module("turingEditorApp").directive("developmentEnvironment",["$sce","$state","$timeout","Environment","Display",function(a,b,c,d,e){function f(a,b){function f(){var a=b.find("iframe")[0];e.is_small()||(a.src=d.source),h.width(d.width),h.height(d.height)}var g=b.find("iframe")[0],h=b.find("div.environment");a.navigation={hide:{text:function(){return"fullscreen"===d.format?"Show":"sidebar"===d.format?"Hide":void 0},icon:function(){return"fullscreen"===d.format?"ion-chevron-right":"sidebar"===d.format?"ion-chevron-left":void 0},click:function(){"fullscreen"===d.format?d.update_format("sidebar"):"sidebar"===d.format&&d.update_format("fullscreen")}},reload:{text:function(){return"Reload"},icon:function(){return"ion-refresh"},click:function(){var a=g.src;g.src="",c(function(){g.src=a})},style:function(){return"nb-link"}}},d.set_environment_listener(f),e.add_listener(f)}return{templateUrl:"components/development-environment/development-environment.html",restrict:"E",link:f}}]),angular.module("turingEditorApp").directive("developmentPlaceholder",["$interval","Environment",function(a,b){function c(c,d){function e(){var a=0,b=0;i.is(":visible")&&(a=i.width(),b=i.height()),f(a,b)}function f(a,c){a=a||0,c=c||0,g===a&&h===c||(g=a,h=c,b.update_size(g,h))}var g,h,i=d.find("#development-placeholder");a(e,600),d.on("$destroy",f),c.$watch("brick",function(a){a&&a.embedded&&a.embedded.data&&a.embedded.data.embedded&&b.update_source(a.embedded.data.embedded)})}return{template:'<div id="development-placeholder"></div>',restrict:"E",link:c,scope:{brick:"=brick"}}}]),angular.module("turingEditorApp").directive("draftToggle",function(){function a(a){this.style=function(){return a.draft?"text-primary":"text-muted"},this.message=function(){return a.draft?"Draft":"Published"}}return a.$inject=["$scope"],{templateUrl:"components/draft-toggle/draft-toggle.html",restrict:"E",controller:a,controllerAs:"draftToggle",scope:{draft:"=draft"}}}),angular.module("turingEditorApp").directive("dropdownInput",function(){function a(a){var b=this,c=function(a){this.value=a};c.prototype.click=function(){b.selected===this.value?b.selected="":b.selected=this.value,b.callback&&a(b.callback)},c.prototype.style=function(){return b.selected==this.value?"active":void 0},this.options=this.options.map(function(a){return new c(a)})}return a.$inject=["$timeout"],{templateUrl:"components/dropdown-input/dropdown-input.html",restrict:"E",replace:!0,controller:a,controllerAs:"dropdown_input",bindToController:{callback:"=",selected:"=",options:"=",label:"@"},scope:{}}}),angular.module("turingEditorApp").directive("genericCard",["Editor",function(a){function b(b,c){function d(){return b.draft?"draft":c.status(b.action)}b.editor=a,b.information={show:function(){return"untouched"!==d()},text:function(){var a=d();return"draft"===a?"Draft":"remixed"===a?"Remixed":"edited"===a?"Edited":"completed"===a?"Completed":"started"===a?"Started":"opened"===a?"Opened":void 0},style:function(){var a=d();return"completed"===a?"btn-success":"opened"===a?"btn-secondary":"btn-primary"}}}return b.$inject=["$scope","Action"],{templateUrl:"components/generic-card/generic-card.html",restrict:"E",controller:b,scope:{title:"=title",image:"=image",description:"=description",draft:"=draft",action:"=action",click:"=click"}}}]),angular.module("turingEditorApp").directive("groupCard",function(){function a(a){}return a.$inject=["$scope"],{templateUrl:"components/group-card/group-card.html",restrict:"E",replace:!0,controller:a,scope:{group:"=group"}}}),angular.module("turingEditorApp").directive("headerCard",function(){function a(a,b){function c(){return a.draft?"draft":b.status(a.action)}a.information={show:function(){return"untouched"!==c()},text:function(){var a=c();return"draft"===a?"Draft":"remixed"===a?"Remixed":"edited"===a?"Edited":"completed"===a?"Completed":"started"===a?"Started":"opened"===a?"Opened":void 0},style:function(){var a=c();return"completed"===a?"btn-success":"opened"===a?"btn-secondary":"btn-primary"}}}return a.$inject=["$scope","Action"],{templateUrl:"components/header-card/header-card.html",restrict:"E",controller:a,scope:{title:"=title",image:"=image",description:"=description",action:"=action",draft:"=draft",click:"=click"}}}),angular.module("turingEditorApp").directive("hiddenEditor",["Component",function(a){function b(b){b.createHidden=function(){b.hidden?b.hidden=null:b.hidden=b.hidden||new a}}return b.$inject=["$scope"],{templateUrl:"components/hidden-editor/hidden-editor.html",restrict:"E",controller:b,scope:{heading:"=heading",hidden:"=ishidden"}}}]),angular.module("turingEditorApp").directive("imageDisplay",function(){function a(a){a.image={show:function(){return!!a.url},style:function(){return this.show()?a.display:void 0}}}return a.$inject=["$scope"],{templateUrl:"components/image-display/image-display.html",restrict:"E",controller:a,scope:{url:"=url",display:"=display"}}}),angular.module("turingEditorApp").directive("imageUploader",function(){function a(a,b){a.callback=a.callback||angular.noop,a.data=a.data||{},a.$watch("files",function(){a.files&&a.files.length>0&&(a.file=a.files[0])}),a.$watch("file",function(){null!=a.file&&a.upload(a.file)}),a.upload=function(c){c&&!c.$error&&(a.data.label=a.data.label||c.name,b.upload(c).then(function(b){a.data.image=b,a.callback()},function(a){console.error(a)}))}}return a.$inject=["$scope","Uploader"],{templateUrl:"components/image-uploader/image-uploader.html",restrict:"E",controller:a,scope:{data:"=data",callback:"=callback"}}}),angular.module("turingEditorApp").directive("languageEditor",function(){function a(a){var b=function(){};a.language=a.language||{};var c=function(a){this.language=a};c.prototype.select=function(){a.language=this.language,b()},c.prototype.selected=function(){return a.language===this.language},c.prototype.style=function(){return this.selected()?"active":void 0},a.languages=["Python","Scratch","Web"].map(function(a){return new c(a)})}return a.$inject=["$scope"],{templateUrl:"components/language-editor/language-editor.html",restrict:"E",controller:a,scope:{heading:"=heading",language:"=language"}}}),angular.module("turingEditorApp").directive("linkEditor",function(){function a(a){a.options=["tab","embed","editor"]}return a.$inject=["$scope"],{templateUrl:"components/link-editor/link-editor.html",restrict:"E",controller:a,scope:{data:"=data",callback:"=callback"}}}),angular.module("turingEditorApp").directive("navbar",["$state","$stateParams","Principal",function(a,b,c){function d(d){var e=this;this.loggedIn=!1,d.$watch(c.getCurrentUser,function(a){e.user=a,c.isLoggedInAsync().then(function(a){console.log(a),e.loggedIn=a})}),this.logout=function(){c.logout(),a.transitionTo(a.current,b,{reload:!0,inherit:!1,notify:!0})},this.routes=[{name:"Learn",state:"learn.home"},{name:"Edit",state:"edit.home"}]}return d.$inject=["$scope"],{templateUrl:"components/navbar/navbar.html",restrict:"E",controller:d,controllerAs:"navbar",scope:{}}}]),angular.module("turingEditorApp").directive("navigationBar",function(){function a(a){function b(){return"nb-link"}function c(){return"nb-title"}a.left&&(a.left.style=a.left.style||b),a.center&&(a.center.style=a.center.style||c),a.right&&(a.right.style=a.right.style||b)}return a.$inject=["$scope"],{templateUrl:"components/navigation-bar/navigation-bar.html",restrict:"E",controller:a,scope:{left:"=left",center:"=center",right:"=right"}}}),angular.module("turingEditorApp").directive("pieceDisplay",["$sce","Environment",function(a,b){function c(c){var d=this;c.$watch(function(){return d.piece=d.piece||{},d.piece.data?d.piece.data.link:void 0},function(){d.piece.data&&d.piece.data.link&&(d.piece.data.trusted_link=a.trustAsResourceUrl(d.piece.data.link))}),c.open_starter=function(){b.update_source(d.piece.data.trusted_link)}}return c.$inject=["$scope"],{templateUrl:"components/piece-display/piece-display.html",restrict:"E",replace:!0,controller:c,controllerAs:"$piece",bindToController:{piece:"="},scope:{}}}]),angular.module("turingEditorApp").directive("pieceEditor",function(){function a(a,b){var c=this;this.piece.tags=this.piece.tags||[],this.formats=b.get_formats(),this.set_format=function(a){c.piece.format=a},a.$watch(function(){return c.piece.tags},function(a){c.tags=c.piece.tags.map(function(a){return{text:a}})},!1),a.$watch(function(){return c.tags},function(a){c.piece.tags=a.map(function(a){return a.text}),console.log("updated",c.piece.tags)},!0)}return a.$inject=["$scope","Resource"],{templateUrl:"components/piece-editor/piece-editor.html",restrict:"E",controller:a,controllerAs:"piece_editor",bindToController:{piece:"=piece",save_piece:"=savePiece"},scope:{}}}),angular.module("turingEditorApp").directive("projectEditor",function(){function a(a){a.$watch("project",function(b){b=b||{},a.displayProject={},angular.copy(a.project,a.displayProject),a.displayProject.provider="TuringLab",a.displayProject.starter=b.starter||{},a.displayProject.image={url:b.image.url,display:"thumbnail"}}),a.save=function(){var b=a.project.steps;angular.copy(a.displayProject,a.project),a.project.steps=b,a.project.$save()}}return{templateUrl:"components/project-editor/project-editor.html",restrict:"E",link:a,scope:{project:"=project",save:"=save"}}}),angular.module("turingEditorApp").directive("propertiesEditor",["Component",function(a){function b(a){console.log(a.component)}return b.$inject=["$scope"],{templateUrl:"components/properties-editor/properties-editor.html",restrict:"E",controller:b,scope:{heading:"=heading",component:"=component",show:"=show"}}}]),angular.module("turingEditorApp").directive("resourceBrowser",function(){function a(a,b,c){function d(){e.resources=c.query(f)}var e=this;this.tags=this.tags||[],this.format=this.format||"text",this.tag_objects=this.tags.map(function(a){return{text:a}});var f={tags:[],limit:10,format:this.format};a.$watch(function(){return e.tag_objects},function(a){var b=a.map(function(a){return a.text});e.tags=b,f.tags=b,d()},!0);var g=c.get_formats(),h=function(a){this.label=a.label||"",this.icon=a.icon||"ion-ionic"};h.prototype.click=function(){e.format=this.label,f.format=this.label,d()},h.prototype.style=function(){return e.format===this.label?"active":void 0},this.buttons=g.map(function(a){return new h(a)})}return a.$inject=["$scope","$state","Resource"],{templateUrl:"components/resource-browser/resource-browser.html",restrict:"E",controller:a,controllerAs:"resource_browser",bindToController:{edit_resource:"=editResource",format:"=format",tags:"=tags"},scope:{}}}),angular.module("turingEditorApp").directive("resourceCard",function(){function a(a){}return a.$inject=["$scope"],{templateUrl:"components/resource-card/resource-card.html",restrict:"E",replace:!0,controller:a,scope:{resource:"=resource"}}}),angular.module("turingEditorApp").directive("resourceEditor",function(){function a(a){}return a.$inject=["$scope"],{templateUrl:"components/resource-editor/resource-editor.html",restrict:"E",controller:a,controllerAs:"resource_editor",bindToController:{resource:"=resource",save_resource:"=saveResource"},scope:{}}}),angular.module("turingEditorApp").directive("stepEditor",function(){function a(a){a.$watch("step",function(b){b=b||{},a.displayStep={},angular.copy(a.step,a.displayStep)}),a.save=function(){var b=a.step.components;angular.copy(a.displayStep,a.step),a.step.components=b,a.step.$save()}}return{templateUrl:"components/step-editor/step-editor.html",restrict:"E",link:a,scope:{step:"=step",save:"=save"}}}),angular.module("turingEditorApp").directive("textEditor",function(){function a(){this.styles=["heading","subheading","content"],this.data.style=this.data.style||this.styles[0]}return{templateUrl:"components/text-editor/text-editor.html",restrict:"E",controller:a,controllerAs:"text_editor",bindToController:{data:"="}}}),angular.module("turingEditorApp").directive("textInput",function(){function a(){this.format=this.format||"plain",this.options={keyMap:"sublime",mode:this.format,lineNumbers:!1,lineWrapping:!0}}return{templateUrl:"components/text-input/text-input.html",restrict:"E",replace:!0,controller:a,controllerAs:"text_input",bindToController:{text:"=",format:"@"},scope:{}}}),angular.module("turingEditorApp").directive("toggleInput",function(){function a(a){this.style=function(){return a.ngModel?"ion-toggle-filled text-primary":"ion-toggle text-muted"},this.click=function(){a.ngModel=!a.ngModel}}return a.$inject=["$scope"],{template:'<i class="icon toggle-input" ng-click="toggle.click()" ng-class="toggle.style()"></i>',restrict:"E",controller:a,controllerAs:"toggle",scope:{ngModel:"="}}}),angular.module("turingEditorApp").directive("userCard",function(){function a(){}return{templateUrl:"components/user-card/user-card.html",restrict:"E",replace:!0,controller:a,controllerAs:"user_card",bindToController:{user:"=user"},scope:{}}}),angular.module("turingEditorApp").directive("videoEditor",function(){function a(a){}return a.$inject=["$scope"],{templateUrl:"components/video-editor/video-editor.html",restrict:"E",controller:a,scope:{data:"=data",callback:"=callback"}}}),angular.module("Config",[]).constant("server",{name:"staging",endpoint:"https://quiet-bastion-25859.herokuapp.com/"}),angular.module("turingEditorApp").service("Action",["$Resource",function(a){var b=new a("actions");return b}]),angular.module("turingEditorApp").service("Brick",["$Resource","Action",function(a,b){function c(a){var b=a&&a.purpose&&"help"===a.purpose.purpose;return a&&a._id&&a.action&&(a.handler&&a.handler.handler||!b&&a.bricks&&a.bricks.length)}var d=new a("bricks"),e=[{label:"code",icon:"ion-code-working"},{label:"learn",icon:"ion-university"},{label:"design",icon:"ion-paintbrush"},{label:"think",icon:"ion-lightbulb"}];d.get_signals=function(){return e},d.get_signal=function(a){return"code"===a?e[0]:"learn"===a?e[1]:"design"===a?e[2]:"think"===a?e[3]:void 0};var f=[{label:"project",icon:"ion-code-working"},{label:"step",icon:"ion-forward"},{label:"lesson",icon:"ion-university"},{label:"concept",icon:"ion-information"},{label:"help",icon:"ion-help"},{label:"tip",icon:"ion-help"}];d.get_purposes=function(){return f},d.get_purpose=function(a){return"project"===a?f[0]:"step"===a?f[1]:"lesson"===a?f[2]:"concept"===a?f[3]:"help"===a?f[4]:"tip"===a?f[5]:void 0};var g=[{label:"wall",icon:"ion-grid"},{label:"list",icon:"ion-navicon-round"}];d.get_displays=function(){return g},d.get_display=function(a){return"wall"===a?g[0]:"list"===a?g[1]:void 0};var h=[{label:"hover",icon:"ion-android-hand"},{label:"checkmark",icon:"ion-checkmark-round"},{label:"children",icon:"ion-person-stalker"},{label:"assessment",icon:"ion-flag"}];d.get_handlers=function(){return h},d.get_handler=function(a){return"hover"===a?h[0]:"checkmark"===a?h[1]:"children"===a?h[2]:"assessment"===a?h[3]:void 0};var i=[{label:"student",icon:"ion-person"},{label:"instructor",icon:"ion-person"},{label:"admin",icon:"ion-person"}];return d.get_audiences=function(){return i},d.get_audience=function(a){return"student"===a?i[0]:"instructor"===a?i[1]:"admin"===a?i[2]:void 0},d.prototype.$aggragate=function(a){for(var b={started:!1,completed:!0},d=0,e=0;e<this.bricks.length;e++){var f=this.bricks[e];c(f)&&(d+=1,f.action.started&&(b.started=!0),f.action.completed?b.started=!0:b.completed=!1)}if(d){var g=!1;b.started=b.started||b.completed,this.action.started!==b.started&&(this.action.started=b.started,g=!0),this.action.completed!==b.completed&&(this.action.completed=b.completed,g=!0),g&&this.$action(a)}},d.prototype.$action=function(a){return this.parent&&this.parent._id&&this.parent.$aggragate(),this.action.$save(a)},d.prototype.siblings=function(a){var b={},c=this.bricks.length-1,d=this.bricks.findIndex(function(b){return a._id===b._id});return d>0&&(b.previous=this.bricks[d-1]),c>d&&(b.next=this.bricks[d+1]),b},d.prototype.$prepare=function(){var a=angular.extend({},this);return a.bricks=a.bricks||[],a.bricks=a.bricks.map(function(a){return delete a.parent,a}),a},d.prototype.$transform=function(){var a=this;this.action&&this.action._id&&(this.action=new b(this.action)),this.bricks=this.bricks||[],this.bricks=this.bricks.map(function(b){return b&&b._id&&(b=new d(b),b.parent=a,b.$transform()),b}),this.$aggragate()},d}]),angular.module("turingEditorApp").service("Group",["$Resource","Brick","Action",function(a,b,c){var d=new a("groups");return d.prototype.$prepare=function(){var a=angular.extend({},this);return a.bricks=a.bricks||[],a.bricks=a.bricks.map(function(a){return delete a.group,a}),a},d.prototype.$transform=function(){var a=this;this.bricks=this.bricks||[],this.bricks=this.bricks.map(function(d){return d&&d._id&&(d=new b(d),d.group=a,d.action=new c(d.action)),d})},d}]),angular.module("turingEditorApp").service("Resource",["$Resource",function(a){var b=[{label:"text",icon:"ion-document-text"},{label:"image",icon:"ion-images"},{label:"video",icon:"ion-social-youtube"},{label:"code",icon:"ion-code"},{label:"link",icon:"ion-link"},{label:"embedded",icon:"ion-monitor"}],c=new a("resources");return c.get_formats=function(){return b},c}]),angular.module("turingEditorApp").service("School",["$Resource",function(a){return new a("schools")}]),angular.module("turingEditorApp").service("User",["$Resource","$http","server",function(a,b,c){var d=new a("users");return d.prototype.$reset_password=function(a,d){var e=c.endpoint+"users/"+this._id+"/reset",f=b.put(e,{password:this.password});return f.then(a,d)},d}]),angular.module("turingEditorApp").service("Wall",["$Resource",function(a){return new a("walls")}]),angular.module("turingEditorApp").factory("Authorization",["$state","$rootScope","Principal",function(a,b,c){var d=["student","instructor","admin"];return{authorize:function(){return c.isLoggedInAsync().then(function(e){if(b.next.access&&b.next.access.auth)if(e){if(b.next.access.role){var f=b.next.access.role,g=d.indexOf(f),h=c.getCurrentUser().role,i=d.indexOf(h);g>i&&a.go("home")}}else a.go("login")})}}}]),angular.module("turingEditorApp").service("Environment",["$timeout",function(a){var b,c=angular.noop,d=angular.noop;this.source="",this.width=0,this.height=0,this.format="sidebar",this.open_login=function(a){"scratch"==a?source="https://scratch.mit.edu/accounts/login":source="https://trinket.io/login",c()},this.update_source=function(a){this.source=a,c()},this.update_size=function(d,e){this.width=d,this.height=e,a.cancel(b),c()},this.hide_environment=function(){},this.set_environment_listener=function(a){(c=a)()},this.update_format=function(a){this.format=a,d()},this.set_interface_listener=function(a){(d=a)()}}]),angular.module("turingEditorApp").service("History",["$localStorage","$state",function(a,b){function c(){return{state:b.current.name,params:b.params}}function d(a){return a=a||c(),h.history.findIndex(function(b){return angular.equals(a,b)})}function e(a){a=a||c();var b=d(a);
b>-1&&h.history.splice(b)}function f(a){e(h.current),h.history.push(h.current),h.current=a}function g(){return e(),h.current=h.history.pop(),h.current}var h=a;h.$default({history:[],current:c()}),this.reset=function(){h.history=[],h.current=c()},this.next=function(a,c){f({state:a,params:c}),b.go(a,c)},this.phantom=function(a,c){g(),f({state:a,params:c});var d={reload:!1,notify:!1};b.go(a,c,d)},this.previous=function(){e();var a=h.history[h.history.length-1];return a},this.back=function(){var a=g()||{state:"learn.home"};b.go(a.state,a.params)}}]),angular.module("turingEditorApp").factory("Principal",["$rootScope","$http","User","$cookieStore","$q","server",function(a,b,c,d,e,f){var g={};return d.get("token")&&(g=c.get({id:"me"})),{login:function(a,h){var i=e.defer();return h=h||angular.noop,b.post(f.endpoint+"auth/local",a).success(function(a){return d.put("token",a.token),g=c.get({id:"me"}),i.resolve(g),h(null,g)}).error(function(a){return this.logout(),i.reject(a),h(a,null)}.bind(this)),i.promise},logout:function(){d.remove("token"),g={}},createUser:function(a,b){var e=b||angular.noop;return c.save(a,function(a){return d.put("token",a.token),g=c.get({id:"me"}),e()},function(a){return this.logout(),e(a)}.bind(this)).$promise},changePassword:function(a,b,d){var e=d||angular.noop;return c.changePassword({id:g._id},{oldPassword:a,newPassword:b},function(a){return e(a)},function(a){return e(a)}).$promise},getCurrentUser:function(){return g},isLoggedIn:function(){return g.hasOwnProperty("_id")},isLoggedInAsync:function(){return e(function(a){g.hasOwnProperty("$promise")?g.$promise.then(function(){a(!0)})["catch"](function(){a(!1)}):a(g.hasOwnProperty("_id")?!0:!1)})},isAdmin:function(){return g.role&&"admin"===g.role},isInstructor:function(){return g.role&&("admin"===g.role||"instructor"===g.role)},getToken:function(){return d.get("token")}}}]),angular.module("turingEditorApp").factory("$Resource",["$resource","server",function(a,b){return function(c,d,e){c=b.endpoint+c+"/:id";var f={update:{method:"PUT",isArray:!1},create:{method:"POST"}};e=angular.extend(f,e);var g={id:"@_id"};d=angular.extend(g,d);var h=a(c,d,e);return h.prototype.$prepare=function(){return angular.extend({},this)},h.prototype.$transform=function(){},h._get=h.get,h.get=function(a,b){var c=h._get(a,b);return c.$promise.then(function(){c.$transform()}),c},h._query=h.query,h.query=function(a,b){var c=h._query(a,b);return c.$promise.then(function(){c.map(function(a){a.$transform()})}),c},h.prototype.toJSON=function(){var a=this.$prepare();return delete a.$promise,delete a.$resolved,a},h.prototype.$save=function(a,b,c){var d;d=this._id?this.$update(a,b,c):this.$create(a,b,c);var e=this;return d.then(function(){e.$transform()}),d},h}}]),angular.module("turingEditorApp").service("Sidebar",function(){function a(){return{text:function(){return"Hide"},icon:function(){return"ion-chevron-left"}}}function b(){return{text:function(){return"Show"},icon:function(){return"ion-chevron-right"}}}var c=this,d=!0,e=angular.noop;this.show=function(){return d},this.watch=function(a){e=a},this.toggle=function(){d=!d,d?c.button=a():c.button=b(),c.button.click=c.toggle,e()},this.button=a(),this.button.click=this.toggle}),angular.module("turingEditorApp").service("Uploader",["$q","$http","Upload","server",function(a,b,c,d){var e=d.endpoint+"upload";return{upload:function(c){return a(function(a,d){b.post(e,{filename:c.name,filetype:c.type}).then(function(b){var e=b.data;console.log(e);var f=new XMLHttpRequest;f.open("PUT",e.signed),f.setRequestHeader("x-amz-acl","public-read"),f.onload=function(){a(e.url)},f.onerror=d,f.send(c)})})}}}]),angular.module("utilities",["ang-drag-drop"]),angular.module("utilities").directive("displayMode",["$window","$timeout","Display",function(a,b,c){return{template:'<div class="hidden-md-up">small</div><div class="hidden-sm-down hidden-lg-up">medium</div><div class="hidden-md-down">large</div>',restrict:"E",replace:!1,link:function(d,e,f){function g(){angular.forEach(h,function(a){return angular.element(a).is(":visible")?(c.set_mode(a.innerText),!1):void 0})}var h=e.find("div"),i=b(g);angular.element(a).bind("resize",function(){b.cancel(i),i=b(function(){g(),d.$apply()},300)})}}}]),angular.module("utilities").service("Display",function(){var a,b=[];this.set_mode=function(b){a=b},this.get_mode=function(){return a},this.is_small=function(){return"small"===a},this.add_listener=function(a){b.push(a)}}),angular.module("turingEditorApp").directive("dragFrame",function(){function a(){var a=this,b=this.editing||!1;this.show=function(c){return"edit"===c?!b&&a.edit:"move"===c?!b&&a.channel:"update"===c?!b&&a.update:"remove"===c?!b&&a.remove:"accept"===c?b&&a.accept:"cancel"===c?b&&a.cancel:void 0},this._edit&&(this.edit=function(c){b=!0,a._edit(c)}),this._accept&&(this.accept=function(c){b=!1,a._accept(c)}),this._cancel&&(this.cancel=function(c){b=!1,a._cancel(c)})}return{templateUrl:"utilities/dragdrop/drag-frame.html",restrict:"E",replace:!0,transclude:!0,controller:a,controllerAs:"drag_frame",bindToController:{data:"=data",_edit:"=edit",update:"=update",remove:"=remove",_accept:"=accept",_cancel:"=cancel",channel:"@channel",editing:"=editing"},scope:{}}}),angular.module("utilities").service("DragDrop",function(){function a(a,b){return a.findIndex(function(a){return a._id===b._id})}this.drop_item=function(b,c,d,e){e=e||angular.noop,null==d&&(d=b.length);var f=a(b,c);f>-1&&(b.splice(f,1),d>f&&(d-=1)),b.splice(d,0,c),e()}}),angular.module("utilities").directive("dropZone",["DragDrop",function(a){function b(b){var c=!1,d=this;this.style=function(){return c?"visible":void 0},this.on_drop=function(b,c){d.drop_item=c,a.drop_item(d.drop_list,d.drop_item,d.drop_index,d.drop_complete)},b.$on("ANGULAR_DRAG_START",function(a,e,f){b.$apply(function(){d.drop_channel===f&&(c=!0)})}),b.$on("ANGULAR_DRAG_END",function(a,e,f){b.$apply(function(){d.drop_channel===f&&(c=!1)})})}return b.$inject=["$scope"],{templateUrl:"utilities/dragdrop/drop-zone.html",restrict:"E",controller:b,controllerAs:"drop_zone",bindToController:{drop_list:"=dropList",drop_complete:"=dropComplete",drop_channel:"@dropChannel",drop_index:"=dropIndex"},scope:{}}}]),angular.module("turingEditorApp").controller("BrickBrowserController",["$scope","$state","Brick",function(a,b,c){function d(){var b={"purpose.purpose":a.query.purpose,search:a.query.search,limit:20};b["purpose.purpose"].length||delete b["purpose.purpose"],a.bricks=c.query(b)}a.new_brick=function(){var a=new c;a.$save(function(){b.go("edit.brick.home",{brick:a._id})})},a.purposes=["project","step","lesson","concept","help"],a.edit_brick=function(a){b.go("edit.brick.home",{brick:a._id})},a.query={purpose:"project",search:""},a.$watch("query",d,!0)}]),angular.module("turingEditorApp").controller("BrickEditorController",["$scope","$state","Brick",function(a,b,c){function d(b){return a.brick.pieces.findIndex(function(a){return a.resource===b.resource})}c.prototype.$store=function(){this.$save(function(){var c=a.brick._id;b.params.edit_brick!==c&&b.go(b.current.name,{edit_brick:c},{reload:!1,notify:!1})})},a.edit_piece=function(a){b.go("edit.brick.editor.editor",{format:a.format,resource:a.resource})},a.remove_piece=function(b){var c=d(b);a.brick.pieces.splice(c,1),a.brick.$store()},b.params.edit_brick?a.brick=c.get({id:b.params.edit_brick}):a.brick=new c({format:"project",pieces:[],bricks:[]}),a.piece_drop=function(b,c,e){null==e&&(e=a.brick.pieces.length),c.resource=c.resource||c._id;var f=d(c);f>-1&&a.brick.pieces.splice(f,1),a.brick.pieces.splice(e,0,c),a.brick.$store()};var e=!1;a.drop_zone={style:function(){return e?"visible":void 0}},a.$on("ANGULAR_DRAG_START",function(b,c,d,f){"piece"===d&&a.$apply(function(){e=!0})}),a.$on("ANGULAR_DRAG_END",function(b,c,d){"piece"===d&&a.$apply(function(){e=!1})}),a.default_pieces=[{format:"text",data:{text:"New Brick",style:"heading"}},{format:"text",data:{text:"Drag some resources in to get started",style:"subheading"}}],a.formats=["project","lesson","quiz","concept","step","component"]}]),angular.module("turingEditorApp").controller("BrickViewerController",["$scope","$state","Brick",function(a,b,c){function d(b){return a.brick.bricks.findIndex(function(a){return b._id===a._id})}function e(b){return a.brick.pieces.findIndex(function(a){return a.resource===b.resource})}a.brick=c.get({id:b.params.brick}),a.edit_brick=function(a){b.go("edit.brick.home",{brick:a._id})},a.remove_brick=function(b){var c=d(b);a.brick.bricks.splice(c,1),a.brick.$save()},a.click_brick=function(){this.bricks.length>0&&b.go("edit.brick.home",{brick:this._id})},a.drop_brick=function(b,c,e){null==e&&(e=a.brick.bricks.length);var f=d(c);f>-1&&a.brick.bricks.splice(f,1),a.brick.bricks.splice(e,0,c),a.brick.$save()};var f={piece:!1,brick:!1};a.drop_zone={style:function(a){return f[a]?"visible":void 0}},a.$on("ANGULAR_DRAG_START",function(b,c,d,e){a.$apply(function(){f[d]=!0})}),a.$on("ANGULAR_DRAG_END",function(b,c,d){a.$apply(function(){f[d]=!1})}),a.edit_piece=function(a){b.go("edit.brick.editor.editor",{format:a.format,resource:a.resource})},a.remove_piece=function(b){var c=e(b);a.brick.pieces.splice(c,1),a.brick.$save()},a.piece_drop=function(b,c,d){null==d&&(d=a.brick.pieces.length),c.resource=c.resource||c._id;var f=e(c);f>-1&&a.brick.pieces.splice(f,1),a.brick.pieces.splice(d,0,c),a.brick.$save()}}]),angular.module("turingEditorApp").controller("EditBrickBricksController",["$scope","$state","brick",function(a,b,c){function d(a){b.go("edit.brick.bricks",a,{notify:!1,reload:!1})}var e=b.params.tags;"string"==typeof e&&(e=[e]),a.tags=e,a.signal=b.params.signal,a.purpose=b.params.purpose,a.$watch("tags",function(a){d({tags:a})}),a.$watch("signal",function(a){d({signal:a})}),a.$watch("purpose",function(a){d({purpose:a})})}]),angular.module("turingEditorApp").controller("EditBrickHomeController",["$scope","brick",function(a,b){console.log(b)}]),angular.module("turingEditorApp").controller("EditBrickController",["$scope","brick",function(a,b){a.brick=b,a.routes=[{name:"Home",state:"edit.brick.home"},{name:"Add Bricks",state:"edit.brick.bricks"},{name:"Add Resources",state:"edit.brick.resources"}]}]),angular.module("turingEditorApp").controller("EditBrickResourceController",["$scope","$state","Resource",function(a,b,c){a.resource=c.get({id:b.params.resource}),a.save_resource=function(){a.resource.$save(function(){b.go("edit.brick.resources",{format:b.params.format,tags:b.params.tags})})}}]),angular.module("turingEditorApp").controller("EditBrickResourcesController",["$scope","$state","brick",function(a,b,c){function d(a){b.go("edit.brick.resources",a,{notify:!1,reload:!1})}a.edit_resource=function(a){b.go("edit.brick.resource",{resource:a._id,format:b.params.format,tags:b.params.tags})};var e=b.params.tags;"string"==typeof e&&(e=[e]),a.tags=e,a.format=b.params.format,a.$watch("tags",function(a){d({tags:a})}),a.$watch("format",function(a){d({format:a})})}]),angular.module("turingEditorApp").controller("EditBricksController",["$scope","$state",function(a,b){function c(a){b.go("edit.bricks",a,{notify:!1,reload:!1})}a.open_brick=function(a){b.go("edit.brick.home",{brick:a._id})};var d=b.params.tags;"string"==typeof d&&(d=[d]),a.tags=d,a.purpose=b.params.purpose,a.signal=b.params.signal,a.$watch("tags",function(a){c({tags:a})}),a.$watch("purpose",function(a){c({purpose:a})}),a.$watch("signal",function(a){c({signal:a})})}]),angular.module("turingEditorApp").controller("EditGroupAssignController",["$scope","group",function(a,b){a.group=b,a.all_bricks=function(a,c){b.bricks.map(function(d){b.assignments[a._id][d._id]=c})},a.all_students=function(a,c){b.students.map(function(d){b.assignments[d._id][a._id]=c})},a.$on("$stateChangeStart",function(){console.log("Saving Group"),b.$save()})}]),angular.module("turingEditorApp").controller("EditGroupBricksController",["$scope","group","Brick",function(a,b,c){function d(a){return b.bricks.findIndex(function(b){return a._id===b._id})}a.open_brick=function(b){a.opened_brick=c.get({id:b._id})},a.save_group=function(){b.$save()},a.remove_brick=function(a){var c=d(a);b.bricks.splice(c,1),b.$save()}}]),angular.module("turingEditorApp").controller("EditGroupController",["$scope","group",function(a,b){a.group=b}]),angular.module("turingEditorApp").controller("EditGroupStudentsController",["$scope","group","User","NgTableParams",function(a,b,c,d){function e(a){return b.students.some(function(b){return b._id===a._id})}a.group=b,a.add_student=function(a){a.selected=!0,b.students.push(a),b.$save(function(){a.selected=e(a)})},a.remove_student=function(a){var c=b.students.findIndex(function(b){return b._id===a._id});c>-1?(b.students.splice(c,1),b.$save(function(){a.selected=e(a)})):a.selected=e(a)},a.table={columns:[{field:"first_name",title:"First Name",filter:{first_name:"text"},show:!0},{field:"last_name",title:"Last Name",filter:{last_name:"text"},show:!0},{field:"age",title:"Age"},{field:"school_name",title:"School"}],params:new d({page:1,count:10},{counts:[],filterDelay:1e3,getData:function(a,b){var d=angular.copy(b.filter());d.role="student",c.query(d).$promise.then(function(c){c.map(function(a){a.school_name=a.school.school_name,a.selected=e(a)}),b.total(c.length),a.resolve(c.slice((b.page()-1)*b.count(),b.page()*b.count()))})}})}}]),angular.module("turingEditorApp").controller("EditGroupsController",["$scope","Group",function(a,b){a.groups=b.query()}]),angular.module("turingEditorApp").controller("EditHomeController",["$scope","$state",function(a,b){a.pages=[{name:"Groups",icon:"ion-ios-people",description:"Create and edit groups to associate users with learning materials",click:function(){b.go("edit.groups")}},{name:"Bricks",icon:"ion-grid",description:"Create and edit learning bricks to create challenges, projects and lessons",click:function(){b.go("edit.bricks")}}]}]),angular.module("turingEditorApp").controller("GroupBrowserController",["$scope","$state","Group",function(a,b,c){a.groups=c.query(),a.create_group=function(){var a=new c;a.$save(function(){b.go("edit.group.home",{group:a._id})})}}]),angular.module("turingEditorApp").controller("GroupViewerController",["$scope","$state","Group",function(a,b,c){function d(b){return a.group.users.findIndex(function(a){return b._id===a._id})}function e(b){return a.group.bricks.findIndex(function(a){return b._id===a._id})}a.group=c.get({id:b.params.group});var f=b.current.name;a.users={show:"edit.group.home"==f||"edit.group.users"==f,style:"edit.group.home"==f?"tile-half":""},a.bricks={show:"edit.group.home"==f||"edit.group.bricks"==f,style:"edit.group.home"==f?"tile-half":""},a.edit_user=function(a){console.log("Edit User",a._id)},a.remove_user=function(b){var c=d(b);a.group.users.splice(c,1),a.group.$save()},a.drop_user=function(b,c){var e=d(c);e>-1&&a.group.users.splice(e,1),a.group.users.push(c),a.group.$save()},a.edit_brick=function(a){b.go("edit.brick.browser",{view_brick:a._id})},a.remove_brick=function(b){var c=e(b);a.group.bricks.splice(c,1),a.group.$save()},a.drop_brick=function(b,c,d){var f=e(c);null==d&&(d=a.group.bricks.length),f>-1&&a.group.bricks.splice(f,1),a.group.bricks.splice(d,0,c),a.group.$save()};var g={brick:!1,user:!1};a.drop_zone={style:function(a){return g[a]?"visible":void 0}},a.$on("ANGULAR_DRAG_START",function(b,c,d,e){console.log(d),a.$apply(function(){g[d]=!0})}),a.$on("ANGULAR_DRAG_END",function(b,c,d){a.$apply(function(){g[d]=!1})})}]),angular.module("turingEditorApp").controller("HomeController",["$scope","$state",function(a,b){a.routes=[{name:"Learn",icon:"ion-university",description:"Learn using TuringLab software: complete challenges, projects and lessons",click:function(){b.go("learn.home")}},{name:"Edit",icon:"ion-edit",description:"Edit TuringLab content: create bricks and assign them to groups of students",click:function(){b.go("edit.home")}}]}]),angular.module("turingEditorApp").controller("LearnBrickController",["$scope","$state","History","Brick","Environment","Display",function(a,b,c,d,e,f){function g(){a.bricks&&a.bricks.left&&a.bricks.left.$promise&&a.bricks.left.$promise.then(function(b){b.embedded&&b.embedded.data?e.update_source(b.embedded.data.embedded):(a.layout.editor=!1,!a.bricks.right&&b.bricks[0]&&b.bricks[0]._id&&(a.bricks.right=d.get({id:b.bricks[0]._id}))),m&&m.params&&m.params.left&&"learn.brick"===m.state&&d.get({id:m.params.left},function(b){l=b.siblings(a.bricks.left)})})}function h(a){a.action.helped=!0,a.$action(),a.bricks=a.bricks.map(function(a){return a._id?a._id:d.get({id:a})})}function i(a,b){b.bricks=b.bricks||[];var c=b.bricks.findIndex(function(b){return b._id?b._id===a._id:b===a._id});return c>-1}function j(b){b.action.opened=!0,b.$action(),i(b,a.bricks.left)?(a.bricks.right=d.get({id:b._id}),c.phantom("learn.brick",{left:a.bricks.left._id,right:b._id}),a.bricks.right.$promise.then(function(a){a.embedded&&a.embedded.data&&k(a)})):i(b,a.bricks.right)?c.next("learn.brick",{left:a.bricks.right._id,right:b._id}):console.error("I don't know where this brick lives")}function k(a){a.action.opened=!0,a.$action(),c.next("learn.brick",{left:a._id,right:null})}a.layout={editor:!0,sidebar:"tile-small",viewer:"tile-large"},a.bricks={left:b.params.left?d.get({id:b.params.left}):null,right:b.params.right?d.get({id:b.params.right}):null};var l,m=c.previous();g(),a.open_brick=function(b){var c=f.get_mode();return b&&b.purpose&&"help"===b.purpose.purpose?h(b):void(a.layout.editor||"small"===c?k(b):j(b))};var n=function(){"fullscreen"===e.format?(a.layout.sidebar="tile-none",a.layout.viewer="tile-full"):"sidebar"===e.format&&(a.layout.sidebar="tile-small",a.layout.viewer="tile-large")};e.set_interface_listener(n),a.navigation={back:{icon:function(){return"ion-chevron-left"},text:function(){return"Back"},click:c.back}},a.page={show:function(){return!!l},previous:{text:"Previous",active:function(){return!!l},style:"btn-secondary",click:function(){l.previous?b.go("learn.brick",{left:l.previous._id}):c.back()}},next:{text:"Next",active:function(){var b=a.bricks.left;return b&&b.action&&b.action.completed},style:"btn-primary",click:function(){l.next?b.go("learn.brick",{left:l.next._id}):c.back()}}}}]),angular.module("turingEditorApp").controller("LearnGroupController",["$scope","$state","History","Group",function(a,b,c,d){a.group=d.get({id:b.params.group}),a.click_brick=function(a){a.action.opened=!0,a.$action(),c.next("learn.brick",{left:a._id})},a.navigation={back:{text:function(){return"Back"},icon:function(){return"ion-chevron-left"},click:function(){b.go("learn.home")}}}}]),angular.module("turingEditorApp").controller("LearnHomeController",["$scope","$state","History","Group","Brick",function(a,b,c,d,e){function f(){var c={},f=b.params.tab;return f?("playlist"===f?(c.assigned="me",a.groups=d.query()):"opened"===f?(c.purpose=["project","lesson"],c.status="opened",a.groups=[]):"started"===f?(c.purpose=["project","lesson"],c.status="started",a.groups=[]):"completed"===f&&(c.purpose=["project","lesson"],c.status="completed",a.groups=[]),void(a.bricks=e.query(c))):a.tabs[0].click()}c.reset(),a.open_group=function(a){c.next("learn.group",{group:a._id})},a.open_brick=function(a){a.action.opened=!0,a.$action(),c.next("learn.brick",{left:a._id})};var g=function(a){this.title=a,this.name=a.toLowerCase()};g.prototype.style=function(){return b.params.tab===this.name?"active":void 0},g.prototype.click=function(){b.params.tab=this.name,b.go("learn.home",{tab:this.name},{reload:!1,notify:!1}),f()},a.tabs=["Playlist","Opened","Started","Completed"].map(function(a){return new g(a)}),a.navigation={back:{text:function(){return"Back"},icon:function(){return"ion-chevron-left"},click:function(){b.go("home")}},title:{text:function(){return"Learn Home"}}},f()}]),angular.module("turingEditorApp").controller("LearnWallController",["$scope","$state","Brick",function(a,b,c){}]),angular.module("turingEditorApp").controller("LoginController",["$state","Principal",function(a,b){var c,d,e=this;this.user={},this.submit=function(){function d(b,c){return b?e.error.handle(b):void(c&&c.$promise.then(function(){"student"===c.role?a.go("learn.home"):a.go("home")}))}e.error.close(),"create"===c?b.createUser(this.user,d):b.login(this.user,d)},this.mode=function(a,b){c=a||"login",d=b||"username","group"===d&&delete this.user.username},this.mode(),this.show=function(a){if(c===a)return!0;if("login"===c)if("username"===d){if("username"===a)return!0}else{if("name"===a)return!0;if("group"===a)return!0}else{if("role"===a)return!0;if("username"===a)return!0;if("name"===a)return!0;if("group"===a)return"student"===e.user.role;if("email"===a)return"instructor"===e.user.role}return!1},this.error={show:!1,handle:function(a){if(this.title=a.statusText||a.status||"Error",this.message=a.message||a.statusText,console.log(a),a.data&&(this.message=a.data.message||a.data,a.data.errors)){console.log(a.data.errors);for(var b in a.data.errors)console.log(b),this.title=a.data.errors[b].name||this.title,this.message=a.data.errors[b].message||this.message}this.show=!0},close:function(){this.show=!1}}}]),angular.module("turingEditorApp").controller("UserBrowserController",["$scope","$state","User",function(a,b,c){function d(){var b={role:a.query.role,search:a.query.search,limit:20};b.role.length||delete b.role,a.users=c.query(b)}a.roles=["student","instructor"],a.query={role:"",search:""},a.$watch("query",d,!0),a.edit_user=function(a){b.go("edit.group.user-editor",{user:a._id})}}]),angular.module("turingEditorApp").controller("UserEditorController",["$scope","$state","$mdToast","User","School",function(a,b,c,d,e){function f(a){a=a||"";var b=a.split("/");if(3===b.length){var c=b[0],d=b[1]-1,e=b[2];return new Date(e,d,c)}}function g(a,b){b=b||"message";var d,e;"message"===b?(d="success-toast",e=3e3):"error"===b&&(d="danger-toast",e=5e3),c.show(c.simple().textContent(a).theme(d).position("bottom right").hideDelay(e))}function h(a){if(g(a.data.message,"error"),a.data.errors)for(var b in a.data.errors)g(a.data.errors[b].message,"error")}b.params.user?(a.user=d.get({id:b.params.user}),a.user.$promise.then(function(){if(a.user.date_of_birth){var b=new Date(a.user.date_of_birth);a.date_of_birth=b.toLocaleDateString("en-GB")}})):(a.date_of_birth="16/02/1992",a.user=new d({username:"Username",first_name:"First Name",last_name:"Last Name",email:"email@test.com"})),a.search_schools=function(a){return e.query({search:a})},a.save_user=function(){a.user.date_of_birth=f(a.date_of_birth),a.user.$save(function(){g("User Saved"),b.go("edit.group.user-editor",{user:a.user._id})},h)},a.reset_password=function(){a.user.$reset_password(function(a){g("Password Reset")},h)}}]),angular.module("turingEditorApp").run(["$templateCache",function(a){a.put("components/brick-attrs/brick-attrs.html",'<div class="brick-attrs"> <ul class="list-group list-group-flush"> <li class="list-group-item" ng-repeat="attr in brick_attrs.attrs"> <div class="row"> <div class="col-xs-6"> <div class="attr-label"> <h4 class="text-capitalize" ng-bind="attr.name"></h4> </div> </div> <div class="col-xs-6"> <div class="attr-badge"> <i ng-class="attr.attr.icon"></i> <div ng-bind="attr.attr.label"></div> </div> </div> </div> </li> </ul> </div>'),a.put("components/brick-browser/brick-browser.html",'<div class="resource-interface"> <div class="resource-sidebar"> <div ng-repeat="button in brick_browser.buttons"> <div class="sidebar-button" ng-click="button.click()" ng-class="button.style()"> <i ng-class="button.icon"></i> <div ng-bind="button.label"></div> </div> </div> </div> <div class="resource-main"> <div class="content"> <div class="row"> <div class="col-md-6"> <dropdown-input label="Signal" selected options="brick_browser.signals"></dropdown-input> </div> <div class="col-md-6"> <tags-input class="tags-input" placeholder="Search for Tag" ng-model="brick_browser.tag_objects"> </tags-input> </div> <div class="wall"> <div class="brick" ng-repeat="brick in brick_browser.bricks"> <drag-frame ng-if="brick_browser.draggable" data="brick" channel="brick"> <brick-card brick="brick" ng-click="brick_browser.open_brick(brick)"> </brick-card> </drag-frame> <brick-card ng-if="!brick_browser.draggable" brick="brick" ng-click="brick_browser.open_brick(brick)"> </brick-card> </div> </div> </div> </div> </div> </div>'),a.put("components/brick-card/brick-card.html",'<div class="card brick-card"> <div class="information"> <div class="signal"> <i ng-class="brick_card.signal.icon"></i> <span class="text-capitalize" ng-bind="brick_card.signal.label"></span> </div> <div class="action" ng-class="brick_card.action.style()" ng-bind="brick_card.action.text()"> </div> </div> <div class="body" ng-class="brick_card.body.style()"> <div class="handler" ng-if="brick_card.handler.show()"> <i ng-click="brick_card.handler.click()" ng-class="brick_card.handler.style()"> </i> </div> <div class="row" ng-if="brick_card.editable"> <div class="col-md-6"> <dropdown-input label="Purpose" callback="brick_card.save_brick" selected options="brick_card.purposes"></dropdown-input> </div> <div class="col-md-6"> <button class="btn btn-default pull-xs-right" ng-click="brick_card.settings.toggle()"> <i class="ion-gear-a"></i> </button> </div> </div> <div class="row" ng-if="brick_card.settings.show"> <div class="col-md-6"> <dropdown-input label="Signal" class="pull-xs-right" callback="brick_card.save_brick" selected options="brick_card.signals"></dropdown-input> </div> <div class="col-md-6"> <dropdown-input label="Display" class="pull-xs-right" callback="brick_card.save_brick" selected options="brick_card.displays"></dropdown-input> </div> <div class="col-md-6"> <dropdown-input label="Audience" class="pull-xs-right" callback="brick_card.save_brick" selected options="brick_card.audiences"></dropdown-input> </div> <div class="col-md-6"> <dropdown-input label="Handler" class="pull-xs-right" callback="brick_card.save_brick" selected options="brick_card.handlers"></dropdown-input> </div> </div> <div class="pieces"> <div ng-repeat="piece in brick_card.brick.pieces"> <drop-zone drop-index="$index" drop-channel="piece" drop-list="brick_card.brick.pieces" drop-complete="brick_card.save_brick"> </drop-zone> <drag-frame ng-if="brick_card.editable" data="piece" channel="piece" editing="brick_card.editing_piece(piece)" update="brick_card.edit_resource" edit="brick_card.edit_piece" remove="brick_card.remove_piece" accept="brick_card.accept_piece_edit" cancel="brick_card.cancel_piece_edit"> <piece-display piece="piece" ng-if="!brick_card.editing_piece(piece)"></piece-display> <piece-editor piece="piece" save-piece="brick_card.save_brick" ng-if="brick_card.editing_piece(piece)"></piece-editor> </drag-frame> <piece-display ng-if="!brick_card.editable" piece="piece"></piece-display> </div> <drop-zone drop-channel="piece" drop-list="brick_card.brick.pieces" drop-complete="brick_card.save_brick"> </drop-zone> <div class="add-piece" ng-if="brick_card.editable"> <button class="btn btn-primary" ng-click="brick_card.add_piece()"> <i class="ion-plus-round"></i> </button> </div> </div> <div class="overlay" ng-if="brick_card.opener.show()" ng-click="brick_card.opener.click()"> <div class="icon"> <i ng-class="brick_card.opener.style()"></i> </div> </div> </div> </div>'),a.put("components/brick-display/brick-display.html",'<div class="content"> <div class="row"> <div class="col-xs-12"> <brick-card brick="brick_display.brick" editable="brick_display.editable"></brick-card> </div> </div> <div class="row" ng-repeat="brick in brick_display.brick.bricks"> <div class="col-xs-12"> <drop-zone drop-index="$index" drop-channel="brick" drop-list="brick_display.brick.bricks" drop-complete="save_brick"> </drop-zone> <drag-frame ng-if="brick_display.draggable" data="brick" channel="brick"> <brick-card brick="brick" editable="brick_display.editable" ng-click="brick_display.open_brick(brick)"> </brick-card> </drag-frame> <brick-card ng-if="!brick_display.draggable" brick="brick" ng-click="brick_display.open_brick(brick)"> </brick-card> </div> <div class="col-xs-11 col-xs-offset-1"> <brick-card brick="brick" ng-if="brick._id" ng-repeat="brick in brick.bricks"> </brick-card> </div> </div> <div class="row"> <div class="col-md-12"> <drop-zone drop-channel="brick" drop-list="brick_display.brick.bricks" drop-complete="save_group"> </drop-zone> </div> </div> </div>'),a.put("components/brick-viewer/brick-viewer.html",'<div class="tile"> <development-placeholder ng-if="brick_viewer.brick.embedded.data" brick="brick_viewer.brick"></development-placeholder> <navigation-bar></navigation-bar> <div class="content" ng-if="!brick_viewer.brick.embedded.data"> <div class="row"> <div class="col-md-12"> <brick-card brick="brick_viewer.brick" ng-if="brick_viewer.brick"> </brick-card> </div> </div> <div class="row" ng-repeat="brick in brick_viewer.brick.bricks"> <div class="col-md-12"> <brick-card brick="brick" open> </brick-card> </div> </div> </div> </div>'),a.put("components/button-card/button-card.html",'<a ng-click="button.click()" class=""> <div class="row"> <div class="tl-card" id="bc-card"> <div class="bc-text"> <h4 class="bc-title">{{title}}</h4> </div> <div class="bc-create"> <i class="icon ion-plus"></i> </div> </div> </div> </a>'),a.put("components/checkmark-editor/checkmark-editor.html",'<div class="row"> <div class="col-md-12 header"> <h3>{{heading}}</h3> </div> <div class="col-lg-12 header"> <input type="checkbox" ng-model="checkmark"> </div> </div>'),a.put("components/code-display/code-display.html",'<scratchblock ng-if="display.scratchblock()" code="data.code"></scratchblock> <div class="code-display" ng-if="display.codemirror()" ui-codemirror="options" ng-model="data.code"> </div>'),a.put("components/code-editor/code-editor.html",'<div class="card code-editor"> <dropdown-input class="language-dropdown" selected options="code_editor.languages"> </dropdown-input> <div class="code-input" ui-codemirror="code_editor.options" ng-model="code_editor.data.code"> </div> </div>'),a.put("components/component-card/component-card.html",'<div class="tl-card"> <div class="cd-interaction"> <div ng-if="component.checkmark" ng-click="checkmark.toggle()"> <i class="cd-clickable ion-ios-checkmark text-primary" ng-if="component.action.completed"> </i> <i class="cd-clickable ion-ios-circle-outline text-default" ng-if="!component.action.completed"> </i> </div> <div ng-if="component.hidden.active" ng-click="hidden.toggle()"> <i class="cd-clickable ion-help-circled text-primary" ng-if="component.hidden.show"> </i> <i class="cd-clickable ion-help-circled text-default" ng-if="!component.hidden.show"> </i> </div> <div ng-if="editor.show()" ng-click="component.edit()"> <i class="cd-clickable ion-drag" sv-handle></i> <i class="cd-clickable ion-edit text-primary" ng-if="component.editing()"></i> <i class="cd-clickable ion-edit text-default" ng-if="!component.editing()"></i> </div> <div ng-if="!editor.show()"> <sv-handle></sv-handle> </div> </div> <component-details class="cd-detail" component="component" ng-class="detailStyle()"> </component-details> <component-details class="cd-detail" component="component.hidden" ng-if="showHidden()"> </component-details> </div>'),a.put("components/component-details-editor/component-details-editor.html",'<text-editor ng-if="component.text.active" heading="\'Text\'" text="component.text.content"></text-editor> <link-editor ng-if="component.link.active" heading="\'Link\'" link="component.link"></link-editor> <code-editor ng-if="component.code.active" code="component.code"></code-editor> <text-editor ng-if="component.video.active" heading="\'Video\'" text="component.video.url"></text-editor> <image-uploader ng-if="component.image.active" image="component.image"></image-uploader>'),a.put("components/component-details/component-details.html",'<div class="details-container"> <div ng-class="text.style()" ng-if="component.text.active"> <p class="cd-markdown" btf-markdown="component.text.content"></p> </div> <div ng-class="image.style()" ng-if="component.image.active"> <image-display url="component.image.url" display="component.image.display"></image-display> </div> <div class="cd-link" ng-if="component.link.active"> <p><a target="_blank" href="{{component.link.url}}">{{component.link.text}}</a></p> </div> <div class="cd-code" ng-if="component.code.active"> <code-display code="component.code"></code-display> </div> <div class="cd-video" ng-if="component.video.active"> <anguvideo ng-model="component.video.url" width="100%"></anguvideo> </div> </div>'),
a.put("components/component-editor/component-editor.html",'<div class="container editor-container"> <div class="row"> <div class="col-lg-6"> <draft-toggle draft="displayComponent.draft"></draft-toggle> <properties-editor heading="\'Properties\'" component="displayComponent" show="true"></properties-editor> <component-details-editor component="displayComponent"></component-details-editor> <div ng-if="displayComponent.hidden.active" class="hidden-editing"> <h2>Help</h2> <component-details-editor component="displayComponent.hidden"></component-details-editor> </div> </div> <div class="col-lg-6"> <component-card component="displayComponent"> </component-card> </div> </div> </div>'),a.put("components/development-environment/development-environment.html",'<div class="environment"> <navigation-bar left="navigation.hide" center="navigation.reload"> </navigation-bar> <div class="environment-container"> <iframe></iframe> </div> </div>'),a.put("components/draft-toggle/draft-toggle.html",'<div class="row"> <div class="col-xs-4"> <h4>Mode</h4> </div> <div class="col-xs-4"> <h4 class="draft-toggle-status" ng-class="draftToggle.style()">{{draftToggle.message()}}</h4> </div> <div class="col-xs-4"> <toggle-input class="draft-toggle-input" ng-model="draft"></toggle-input> </div> </div>'),a.put("components/dropdown-input/dropdown-input.html",'<div class="dropdown dropdown-input"> <span> {{dropdown_input.label}} </span> <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> {{dropdown_input.selected}} </button> <div class="dropdown-menu"> <a class="dropdown-item" ng-class="option.style()" ng-click="option.click()" ng-repeat="option in dropdown_input.options"> {{option.value}} </a> </div> </div>'),a.put("components/generic-card/generic-card.html",'<a class="click" href="" ng-click="click()"> <div class="row"> <div class="gc-card tl-card"> <div class="gc-interaction"> <div class="gc-drag-icon" ng-if="editor.show()"> <i class="cd-clickable ion-drag" sv-handle></i> </div> <div ng-if="!editor.show()"> <sv-handle></sv-handle> </div> </div> <div class="gc-image"> <image-display url="image.url" display="\'thumbnail\'"></image-display> </div> <div class="gc-text"> <h2 class="gc-title">{{title}}</h2> <p class="gc-description" btf-markdown="description"></p> </div> <div class="gc-enter"> <div> <i class="icon ion-chevron-right"></i> </div> </div> <div class="gc-info"> <div class="gc-info-box" ng-if="information.show()" ng-class="information.style()"> {{information.text()}} </div> </div> </div> </div> </a>'),a.put("components/group-card/group-card.html",'<div class="card text-xs-center"> <div class="card-block"> <h4 class="card-title">{{group.name}}</h4> <p class="card-text">{{group.description}}</p> <p class="card-text"><small class="text-muted">{{group.users.length}} users</small></p> <p class="card-text"><small class="text-muted">{{group.bricks.length}} bricks</small></p> </div> </div>'),a.put("components/header-card/header-card.html",'<div class="row"> <div class="hc-card tl-card"> <div class="hc-image"> <image-display url="image.url" display="\'cover\'"></image-display> </div> <div class="hc-text"> <h2 class="hc-title">{{title}}</h2> <p class="hc-description" btf-markdown="description"></p> </div> <div class="hc-info"> <div class="hc-info-box" ng-class="information.style()"> {{information.text()}} </div> </div> </div> </div>'),a.put("components/hidden-editor/hidden-editor.html",'<div class="row"> <div class="col-md-12 header"> <h3>{{heading}}</h3> </div> <div class="col-md-12 header"> <input type="checkbox" ng-click="createHidden()"> </div> </div>'),a.put("components/image-display/image-display.html",'<div class="img-container"> <div class="img-thumbnail"> <div class="img-preview" ng-class="image.style()"> <img ng-src="{{url}}"> </div> </div> </div>'),a.put("components/image-uploader/image-uploader.html",'<div class="card editor-card"> <div class="drop-container"> <div class="drop-box" ngf-select="upload($file)" ngf-drop="upload($file)" ngf-drag-over-class="\'dragover\'" ngf-multiple="false" ngf-pattern="\'image/*\'"> Click Here or Drop an Image to Upload </div> </div> <input type="text" class="form-control" placeholder="Label" ng-model="data.label"> </div>'),a.put("components/language-editor/language-editor.html",'<div class="row"> <div class="col-md-12 header"> <h3>{{heading}} <div class="btn-group btn-header"> <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Language {{language}} </button> <div class="dropdown-menu"> <a class="dropdown-item" ng-repeat="language in languages" ng-click="language.select()" ng-class="language.style()">{{language.language}}</a> </div> </div> </h3> </div> </div>'),a.put("components/link-editor/link-editor.html",'<div class="card editor-card"> <dropdown-input selected options="options"> </dropdown-input> <input type="text" class="form-control" placeholder="Link" ng-model="data.link"> <input type="text" class="form-control" placeholder="Label" ng-model="data.label"> </div>'),a.put("components/navbar/navbar.html",'<nav class="navbar navbar-dark navbar-fixed-top bg-inverse"> <a class="navbar-brand" href="#/"> <div> <img class="nav-image" src="images/white_icon.088e646a.png"> <span class="hidden-sm-down">TuringLab</span> </div> </a> <nav class="nav navbar-nav pull-xs-left"> <a class="nav-item nav-link" ng-repeat="route in navbar.routes" ui-sref-active="active" ui-sref="{{route.state}}"> {{route.name}} </a> </nav> <nav class="nav navbar-nav pull-xs-right" ng-if="navbar.loggedIn"> <a class="nav-item nav-link" href="" ng-click="navbar.logout()"> <span class="hidden-sm-down">Logout</span> <i class="ion-log-out"></i> </a> </nav> <div class="navbar-brand pull-xs-right">{{navbar.user.first_name}}</div> </nav>'),a.put("components/navigation-bar/navigation-bar.html",'<div class="nb-row"> <div class="nb-cell"> <a class="btn btn-default nb-left" ng-if="left" ng-class="left.style()" ng-click="left.click()"> <i ng-class="left.icon()"></i> {{left.text()}} </a> </div> <div class="nb-cell"> <div class="btn btn-default nb-center" ng-if="center" ng-class="center.style()" ng-click="center.click()"> <i ng-class="center.icon()"></i> {{center.text()}} </div> </div> <div class="nb-cell"> <div class="btn btn-default nb-right" ng-if="right" ng-class="right.style()" ng-click="right.click()"> <i ng-class="right.icon()"></i> {{right.text()}} </div> </div> </div> <div class="nb-spacer"></div>'),a.put("components/piece-display/piece-display.html",'<div class="piece-display"> <div ng-if="$piece.piece.format == \'image\'"> <img class="piece-image" ng-src="{{$piece.piece.data.image}}"> </div> <div class="piece-text" ng-if="$piece.piece.format == \'text\'"> <p ng-if="$piece.piece.data.style == \'heading\'" class="h4" btf-markdown="$piece.piece.data.text"></p> <p ng-if="$piece.piece.data.style == \'subheading\'" class="lead" btf-markdown="$piece.piece.data.text"></p> <p ng-if="$piece.piece.data.style == \'content\'" btf-markdown="$piece.piece.data.text"></p> </div> <div class="piece-link" ng-if="$piece.piece.format == \'link\'"> <a ng-if="$piece.piece.data.action == \'tab\'" target="_blank" href="{{$piece.piece.data.trusted_link}}" ng-bind="$piece.piece.data.label"></a> <button class="btn btn-primary" ng-if="$piece.piece.data.action == \'editor\'" ng-click="open_starter()" ng-bind="$piece.piece.data.label"></button> <iframe ng-if="$piece.piece.data.action == \'embed\'" ng-src="{{$piece.piece.data.trusted_link}}"> </iframe> </div> <div class="piece-badge" ng-if="($piece.piece.format == \'purpose\') || ($piece.piece.format == \'signal\') || ($piece.piece.format == \'handler\') || ($piece.piece.format == \'audience\')"> <i ng-class="$piece.piece.data.icon"></i> <p ng-bind="$piece.piece.data.label"></p> </div> <div class="piece-assess" ng-if="$piece.piece.format == \'assess\'"> <i ng-if="$piece.piece.data.format == \'single\'" class="ion-checkmark-circled"></i> <p btf-markdown="$piece.piece.data.assess"></p> </div> <div class="piece-code" ng-if="$piece.piece.format == \'code\'"> <code-display data="$piece.piece.data"></code-display> </div> <div class="piece-video" ng-if="$piece.piece.format == \'video\'"> <anguvideo ng-model="$piece.piece.data.video" width="100%"></anguvideo> </div> </div>'),a.put("components/piece-editor/piece-editor.html",'<div class="piece-editor"> <div class="data-editor" ng-if="piece_editor.piece.format"> <text-editor ng-if="piece_editor.piece.format == \'text\'" data="piece_editor.piece.data"> </text-editor> <link-editor ng-if="piece_editor.piece.format == \'link\'" data="piece_editor.piece.data"> </link-editor> <code-editor ng-if="piece_editor.piece.format == \'code\'" data="piece_editor.piece.data"> </code-editor> <image-uploader ng-if="piece_editor.piece.format == \'image\'" callback="save_piece" data="piece_editor.piece.data"> </image-uploader> <video-editor ng-if="piece_editor.piece.format == \'video\'" data="piece_editor.piece.data"> </video-editor> </div> <div class="format-editor" ng-if="!piece_editor.piece.format"> <div class="row"> <div class="col-md-4" ng-repeat="format in piece_editor.formats"> <button class="btn btn-default" ng-click="piece_editor.set_format(format.label)"> <i ng-class="format.icon"></i> <div ng-bind="format.label"></div> </button> </div> </div> </div> <tags-input class="tags-input" ng-model="piece_editor.tags"> </tags-input> </div>'),a.put("components/project-editor/project-editor.html",'<div class="container editor-container"> <div class="row"> <div class="col-lg-6"> <draft-toggle draft="displayProject.draft"></draft-toggle> <text-editor heading="\'Title\'" text="displayProject.title"></text-editor> <text-editor heading="\'Description\'" text="displayProject.description"></text-editor> <link-editor heading="\'Starter Project\'" link="displayProject.starter"></link-editor> <language-editor heading="\'Language\'" language="displayProject.language"></language-editor> <image-uploader image="displayProject.image"></image-uploader> </div> <div class="col-lg-6"> <header-card title="displayProject.title" description="displayProject.description" image="displayProject.image"> </header-card> </div> </div> </div>'),a.put("components/properties-editor/properties-editor.html",'<div class="pe-heading header"> <h3>{{heading}}</h3> <div class="pe-arrow" ng-click="show=!show"> <i class="icon ion-chevron-down"></i> </div> </div> <div class="pe-properties" ng-show="show"> <div class="row"> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.text.active" class="pe-checkbox"> Text </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.link.active" class="pe-checkbox"> Link </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.code.active" class="pe-checkbox"> Code </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.image.active" class="pe-checkbox"> Image </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.video.active" class="pe-checkbox"> Video </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.hidden.active" class="pe-checkbox"> Help </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.checkmark" class="pe-checkbox"> Self-assess </label> </div> </div> <div ng-if="component.hidden.active"> <div class="pe-hidden-properties"> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.hidden.text.active" class="pe-checkbox"> Text </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.hidden.link.active" class="pe-checkbox"> Link </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.hidden.code.active" class="pe-checkbox"> Code </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.hidden.image.active" class="pe-checkbox"> Image </label> </div> </div> </div> </div>'),a.put("components/resource-browser/resource-browser.html",'<div class="resource-interface"> <div class="resource-sidebar"> <div ng-repeat="button in resource_browser.buttons"> <div class="sidebar-button" ng-click="button.click()" ng-class="button.style()"> <i ng-class="button.icon"></i> <div ng-bind="button.label"></div> </div> </div> </div> <div class="resource-main"> <div class="content"> <div class="row"> <div class="col-md-12"> <tags-input class="tags-input" placeholder="Search for Tag" ng-model="resource_browser.tag_objects"> </tags-input> </div> </div> <div class="row"> <div class="col-md-12" ng-repeat="resource in resource_browser.resources"> <drag-frame data="resource" channel="piece" edit="resource_browser.edit_resource"> <resource-card resource="resource"> </resource-card> </drag-frame> </div> </div> </div> </div> </div>'),a.put("components/resource-card/resource-card.html",'<div class="card"> <piece-display piece="resource"></piece-display> <h5 class="text-xs-center" ng-if="resource.name" ng-bind="resource.name"></h5> <p class="lead text-xs-center" ng-if="resource.description" ng-bind="resource.description"></p> <div class="card-tags" ng-if="resource.tags.length"> <span ng-repeat="tag in resource.tags" class="label label-default"> {{tag}} </span> </div> </div>'),a.put("components/resource-editor/resource-editor.html",'<div class="content"> <div class="row"> <div class="col-md-12"> <h4>Preview</h4> </div> <div class="col-md-12"> <drag-frame data="resource_editor.resource" channel="piece"> <resource-card resource="resource_editor.resource"></resource-card> </drag-frame> </div> </div> <div class="row"> <div class="col-md-12"> <h4>Edit</h4> </div> <div class="col-md-12"> <piece-editor piece="resource_editor.resource" save-piece="resource_editor.save_resource"></piece-editor> </div> </div> <div class="row"> <div class="col-md-12"> <button class="btn btn-primary" ng-click="resource_editor.save_resource()">Save</button> </div> </div> </div>'),a.put("components/step-change/step-change.html",""),a.put("components/step-editor/step-editor.html",'<div class="container editor-container"> <div class="row"> <div class="col-lg-6"> <draft-toggle draft="displayStep.draft"></draft-toggle> <text-editor heading="\'Title\'" text="displayStep.title"></text-editor> <text-editor heading="\'Description\'" text="displayStep.description"></text-editor> <image-uploader image="displayStep.image"></image-uploader> </div> <div class="col-lg-6"> <header-card title="displayStep.title" description="displayStep.description" image="displayStep.image" ng-click="displayStep.component.edit()"> </header-card> </div> </div> </div>'),a.put("components/text-editor/text-editor.html",'<div class="card text-editor"> <dropdown-input class="text-editor-dropdown-input" selected options="text_editor.styles"></dropdown-input> <text-input class="text-editor-text-input" text="text_editor.data.text" format="markdown"></text-input> </div>'),a.put("components/text-input/text-input.html",'<div class="text-input" ui-codemirror="text_input.options" ng-model="text_input.text"> </div>'),a.put("components/user-card/user-card.html",'<div class="card card-block"> <h4 class="card-title"> <span>{{user_card.user.first_name}}</span> <span>{{user_card.user.last_name}}</span> <span class="pull-xs-right">{{user_card.user.age}}</span> </h4> <!-- <h6 class="card-subtitle text-muted"> years old{{user_card.user.role}}</h6> --> <p class="card-text">{{user_card.user.school.school_name}}</p> </div>'),a.put("components/video-editor/video-editor.html",'<div class="card editor-card"> <input type="text" class="form-control" placeholder="Video" ng-model="data.video"> <input type="text" class="form-control" placeholder="Label" ng-model="data.label"> </div>'),a.put("views/brick/browser.html",'<div class="content"> <div class="row"> <div class="col-md-4"> <div class="input-group"> <span class="input-group-addon"> Purpose </span> <dropdown-input class="input-group-btn" selected options="purposes"> </dropdown-input> </div> </div> <div class="col-md-8"> <div class="input-group"> <span class="input-group-addon"> <i class="ion-search"></i> </span> <input type="text" class="form-control" placeholder="Search" ng-model="query.search"> </div> </div> </div> <br> <div class="row"> <div class="col-md-12"> <div class="card-columns"> <div class="card card-block"> <h2 class="card-title">New Brick</h2> <p class="card-text">Create a new brick</p> <a class="btn btn-lg btn-primary" ng-click="new_brick()">Create Brick</a> </div> <drag-frame data="brick" channel="brick" edit="edit_brick" remove="remove_brick" ng-repeat="brick in bricks"> <brick-card brick="brick"></brick-card> </drag-frame> </div> </div> </div> </div>'),a.put("views/brick/editor.html",'<div class="container padding"> <div class="row"> <div class="card"> <div class="brick-card" ng-if="!brick.pieces.length"> <div ng-repeat="piece in default_pieces"> <piece-display class="content" piece="piece"></piece-display> </div> </div> <drag-frame data="brick" channel="brick" edit="edit_brick"> <div class="brick-card"> <dropdown-input selected options="formats"></dropdown-input> </div> </drag-frame> <div class="brick-card" ng-if="brick.pieces.length"> <div ng-repeat="piece in brick.pieces track by $index"> <div class="drop-zone" ng-class="drop_zone.style()" ui-on-drop="piece_drop($event,$data,$index)" drop-channel="piece" drag-hover-class="hover"> Insert Piece Here </div> <drag-frame data="piece" channel="piece" edit="edit_piece" remove="remove_piece"> <piece-display piece="piece"></piece-display> </drag-frame> </div> </div> <div class="drop-zone" ng-class="drop_zone.style()" ui-on-drop="piece_drop($event,$data)" drop-channel="piece" drag-hover-class="hover"> Add Piece Here </div> </div> </div> </div>'),a.put("views/brick/header.html",'<span class="header-button"> <span class="edit-link" ui-sref="edit.bricks"> <i class="ion-chevron-left"></i> </span> </span> <span class="header-title"> Brick </span> <ul class="header-tabs"> <li ui-sref="edit.brick.home" ui-sref-active="active"> Home </li> <li ui-sref="edit.brick.bricks" ui-sref-active="active"> Bricks </li> <li ui-sref="edit.brick.resources" ui-sref-active="active"> Resources </li> </ul>'),a.put("views/brick/main.html",'<div class="main tile" ui-view="main"> <div class="tile tile-small" ui-view="viewer"></div> <div class="tile tile-large" ui-view="browser"></div> </div>'),a.put("views/brick/viewer.html",'<div class="content"> <div class="row"> <div class="col-md-12"> <brick-attrs brick="brick"></brick-attrs> </div> </div> <div class="row"> <div class="col-md-12"> <div class="card"> <div class="brick-card" ng-if="brick.pieces.length"> <div ng-repeat="piece in brick.pieces track by $index"> <div class="drop-zone" ng-class="drop_zone.style(\'piece\')" ui-on-drop="piece_drop($event,$data,$index)" drop-channel="piece" drag-hover-class="hover"> </div> <drag-frame data="piece" channel="piece" edit="edit_piece" remove="remove_piece"> <piece-display piece="piece"></piece-display> </drag-frame> </div> </div> <div class="drop-zone" ng-class="drop_zone.style(\'piece\')" ui-on-drop="piece_drop($event,$data)" drop-channel="piece" drag-hover-class="hover"> </div> </div> </div> </div> <div class="row" ng-repeat="brick in brick.bricks"> <div class="col-md-12"> <div class="drop-zone" ng-class="drop_zone.style(\'brick\')" ui-on-drop="drop_brick($event,$data,$index)" drop-channel="brick" drag-hover-class="hover"> </div> <drag-frame data="brick" channel="brick" edit="edit_brick" remove="remove_brick"> <brick-card brick="brick" ng-click="open_brick(brick)"></brick-card> </drag-frame> </div> </div> <div class="row"> <div class="col-md-12"> <div class="drop-zone" ng-class="drop_zone.style(\'brick\')" ui-on-drop="drop_brick($event,$data)" drop-channel="brick" drag-hover-class="hover"> </div> </div> </div> </div>'),a.put("views/edit/brick/bricks.html",'<div class="tile-body"> <div class="tile tile-third"> <brick-browser tags="tags" signal="signal" purpose="purpose" draggable="true" edit-brick="edit_brick"></brick-browser> </div> <div class="tile tile-third"> <brick-display brick="brick" editable="true" draggable="true" edit-resource="edit_resource"></brick-display> </div> <div class="tile tile-third"> <brick-viewer brick="brick"></brick-viewer> </div> </div>'),a.put("views/edit/brick/home.html",'<div class="tile-body"> <div class="tile tile-third"> <brick-display brick="brick"></brick-display> </div> <div class="tile tile-twothird"> <brick-viewer brick="brick"></brick-viewer> </div> </div>'),a.put("views/edit/brick/main.html",'<div class="tile"> <div class="tile-head"> <div class="container-fluid"> <div class="row"> <div class="col-md-1"> <button class="btn btn-primary" ui-sref="edit.bricks"> <i class="ion-chevron-left"></i> <span>Back</span> </button> </div> <div class="col-md-5"> <h1>Edit Brick</h1> </div> <div class="col-md-6"> <ul class="nav nav-tabs pull-xs-right"> <li class="nav-item" ng-repeat="route in routes"> <a class="nav-link" href="#" ui-sref="{{route.state}}" ui-sref-active="active"> {{route.name}} </a> </li> </ul> </div> </div> </div> </div> <div ui-view="main"></div> </div>'),a.put("views/edit/brick/resource.html",'<div class="tile-body"> <div class="tile tile-third"> <resource-editor resource="resource" save-resource="save_resource"></resource-editor> </div> <div class="tile tile-third"> <brick-display brick="brick"></brick-display> </div> <div class="tile tile-third"> <brick-viewer brick="brick"></brick-viewer> </div> </div>'),a.put("views/edit/brick/resources.html",'<div class="tile-body"> <div class="tile tile-third"> <resource-browser format="format" tags="tags" edit-resource="edit_resource"></resource-browser> </div> <div class="tile tile-third"> <brick-display brick="brick" editable="true" draggable="true" edit-resource="edit_resource"></brick-display> </div> <div class="tile tile-third"> <brick-viewer brick="brick"></brick-viewer> </div> </div>'),a.put("views/edit/bricks/bricks.html",'<div class="tile"> <brick-browser tags="tags" signal="signal" purpose="purpose" open-brick="open_brick"></brick-browser> </div>'),a.put("views/edit/group/assign.html",'<div class="tile-body"> <div class="content-scroll"> <div> <h1>Assign Bricks to Students</h1> </div> <div> <table class="table table-bordered table-assign"> <thead> <tr> <th>Student</th> <th ng-repeat="brick in group.bricks"> <brick-card brick="brick"> </brick-card> <button class="btn btn-success" ng-click="all_students(brick,true)"> Add <i class="ion-plus-round"></i> </button> <button class="btn btn-danger" ng-click="all_students(brick,false)"> Remove <i class="ion-close-round"></i> </button> </th> </tr> </thead> <tbody> <tr ng-repeat="student in group.students"> <th scope="row"> <p class="student-name"> {{student.first_name}} {{student.last_name}} <button class="btn btn-success" ng-click="all_bricks(student,true)"> Add <i class="ion-plus-round"></i> </button> <button class="btn btn-danger" ng-click="all_bricks(student,false)"> Remove <i class="ion-close-round"></i> </button> </p> </th> <td ng-repeat="brick in group.bricks"> <input type="checkbox" ng-model="group.assignments[student._id][brick._id]"> </td> </tr> </tbody> </table> </div> </div> </div> <div class="tile-foot"> <div class="container-fluid"> <div class="row"> <div class="col-md-6"> <button class="btn btn-primary pull-xs-left" ui-sref="edit.group.bricks"> <i class="ion-chevron-left"> View Bricks </button> </div> <div class="col-md-6"> <button class="btn btn-success pull-xs-right" ui-sref="edit.group"> Complete <i class="ion-chevron-right"> </button> </div> </div> </div> </div>'),a.put("views/edit/group/bricks.html",'<div class="tile-body"> <div class="tile tile-half"> <brick-browser open-brick="open_brick" draggable="true"></brick-browser> </div> <div class="tile tile-small"> <brick-display brick="opened_brick" draggable="true"></brick-display> </div> <div class="tile tile-small"> <div class="container-fluid"> <div class="row" ng-repeat="brick in group.bricks"> <drop-zone drop-index="$index" drop-channel="brick" drop-list="group.bricks" drop-complete="save_group"> </drop-zone> <drag-frame data="brick" channel="brick" remove="remove_brick"> <brick-card brick="brick"> </brick-card> </drag-frame> </div> <div class="row"> <drop-zone drop-channel="brick" drop-list="group.bricks" drop-complete="save_group"> </drop-zone> </div> </div> </div> </div> <div class="tile-foot"> <div class="container-fluid"> <div class="row"> <div class="col-md-6"> <button class="btn btn-primary pull-xs-left" ui-sref="edit.group.students"> <i class="ion-chevron-left"> View Students </button> </div> <div class="col-md-6"> <button class="btn btn-primary pull-xs-right" ui-sref="edit.group.assign"> Assign Bricks <i class="ion-chevron-right"> </button> </div> </div> </div> </div>'),a.put("views/edit/group/group.html",'<div class="tile"> <div class="tile-head"> <div class="container-fluid"> <div class="row"> <div class="col-md-2"> <button class="btn btn-primary pull-xs-left" ui-sref="edit.group"> <i class="ion-home"> Group Home </button> </div> <div class="col-md-5"> <h4>{{group.name}} <small class="text-muted">{{group.description}}</small> </h4> </div> <div class="col-md-5"> <ul class="nav nav-tabs pull-xs-right"> <li class="nav-item"> <a class="nav-link" href="#" ui-sref="edit.group.students" ui-sref-active="active">Students</a> </li> <li class="nav-item"> <a class="nav-link" href="#" ui-sref="edit.group.bricks" ui-sref-active="active">Bricks</a> </li> <li class="nav-item"> <a class="nav-link" href="#" ui-sref="edit.group.assign" ui-sref-active="active">Assign</a> </li> </ul> </div> </div> </div> </div> <div ui-view="main"> <div class="tile-body"> <div class="container-fluid"> <!--         <div class="row">\n          <div class="col-md-12">\n            <h4>Instructors</h4>\n          </div>\n        </div> --> <div class="row"> <div class="col-md-12"> <h4>Students</h4> </div> <div class="col-md-12"> <table class="table table-bordered"> <thead> <tr> <th>First Name</th> <th>Last Name</th> <th>Age</th> <th>School</th> </tr> </thead> <tbody> <tr ng-repeat="student in group.students"> <td>{{student.first_name}}</td> <td>{{student.last_name}}</td> <td>{{student.age}}</td> <td>{{student.school.school_name}}</td> </tr> </tbody> </table> </div> </div> <div class="row"> <div class="col-md-12"> <h4>Bricks</h4> </div> <div class="wall"> <div class="brick" ng-repeat="brick in group.bricks"> <brick-card brick="brick"> </brick-card> </div> </div> </div> </div> </div> <div class="tile-foot"> <div class="container-fluid"> <div class="row"> <div class="col-md-6"></div> <div class="col-md-6"> <button class="btn btn-primary pull-xs-right" ui-sref="edit.group.students"> Add Students <i class="ion-chevron-right"> </button> </div> </div> </div> </div> </div> </div>'),a.put("views/edit/group/students.html",'<div class="tile-body"> <div class="container-fluid"> <div class="row"> <div class="col-md-12"> <h1>Students</h1> </div> <div class="col-md-12"> <table ng-table-dynamic="table.params with table.columns" show-filter="true" class="table table-condensed table-bordered table-striped"> <tr ng-repeat="student in $data track by student._id"> <td ng-repeat="column in $columns">{{::student[column.field]}}</td> <td> <button class="btn btn-danger" ng-if="student.selected" ng-click="remove_student(student)"> <i class="ion-close-round"></i> </button> <button class="btn btn-success" ng-if="!student.selected" ng-click="add_student(student)"> <i class="ion-plus-round"></i> </button> </td> </tr> </table> </div> </div> </div> <div class="row"> <div class="col-md-3" ng-repeat="student in group.students"> <user-card user="student"></user-card> </div> </div> </div> <div class="tile-foot"> <div class="container-fluid"> <div class="row"> <div class="col-md-6"> <button class="btn btn-primary pull-xs-left" ui-sref="edit.group"> <i class="ion-chevron-left"> View Group </button> </div> <div class="col-md-6"> <button class="btn btn-primary pull-xs-right" ui-sref="edit.group.bricks"> Add Bricks <i class="ion-chevron-right"> </button> </div> </div> </div> </div>'),a.put("views/edit/groups/groups.html",'<div class="content"> <div class="row"> <div class="col-md-4" ng-repeat="group in groups"> <group-card group="group" ui-sref="edit.group({ group:group._id })"></group-card> </div> </div> </div>'),a.put("views/edit/home.html",'<div class="tile"> <div class="content"> <div class="row"> <div class="col-md-12"> <div class="card-deck-wrapper"> <div class="card-deck"> <div class="card" ng-repeat="page in pages" ng-click="page.click()"> <div class="card-block text-xs-center"> <i class="page-icon" ng-class="page.icon"></i> <h2 class="card-title" ng-bind="page.name"></h2> <p class="card-text lead" ng-bind="page.description"></p> </div> </div> </div> </div> </div> </div> </div> </div>'),a.put("views/group/browser.html",'<div class="content"> <div class="row"> <div class="col-md-12"> <div class="card-columns"> <drag-frame data="group" channel="group" edit="edit_group" remove="remove_group" ui-sref="edit.group.home({group: group._id})" ng-repeat="group in groups"> <group-card group="group"></group-card> </drag-frame> </div> </div> </div> <div class="row"> <div class="col-md-6 col-md-offset-3"> <button type="button" ng-click="create_group()" class="btn btn-primary btn-lg btn-block"> Create Group </button> </div> </div> </div>'),a.put("views/group/header.html",'<span class="header-button"> <span class="edit-link" ui-sref="edit.groups"> <i class="ion-chevron-left"></i> </span> </span> <span class="header-title"> Group </span> <ul class="header-tabs"> <li ui-sref="edit.group.home" ui-sref-active="active"> Home </li> <li ui-sref="edit.group.bricks" ui-sref-active="active"> Bricks </li> <li ui-sref="edit.group.users" ui-sref-active="active"> Users </li> </ul>'),a.put("views/group/main.html",'<div class="main" ui-view="main"> <div class="tile tile-small" ui-view="viewer"></div> <div class="tile tile-large" ui-view="browser"></div> </div>'),a.put("views/group/viewer.html",'<div class="tile" ng-class="users.style" ng-if="users.show"> <div class="content"> <div class="row"> <div class="col-md-12"> <h1>Users</h1> <div ng-repeat="user in group.users"> <drag-frame data="user" edit="edit_user" remove="remove_user"> <user-card user="user" ng-click="user.click()"></user-card> </drag-frame> </div> <div class="drop-zone" ng-class="drop_zone.style(\'user\')" ui-on-drop="drop_user($event,$data)" drop-channel="user" drag-hover-class="hover"> Add User </div> </div> </div> </div> </div> <div class="tile" ng-class="bricks.style" ng-if="bricks.show"> <div class="content"> <div class="row"> <div class="col-md-12"> <h1>Bricks</h1> <div ng-repeat="brick in group.bricks"> <div class="drop-zone" ng-class="drop_zone.style(\'brick\')" ui-on-drop="drop_brick($event,$data,$index)" drop-channel="brick" drag-hover-class="hover"> Add Brick </div> <drag-frame data="brick" channel="brick" edit="edit_brick" remove="remove_brick"> <brick-card brick="brick" ng-click="brick.click()"></brick-card> </drag-frame> </div> <div class="drop-zone" ng-class="drop_zone.style(\'brick\')" ui-on-drop="drop_brick($event,$data)" drop-channel="brick" drag-hover-class="hover"> Add Brick </div> </div> </div> </div> </div>'),a.put("views/home/home.html",'<div class="tile"> <div class="content"> <div class="row"> <div class="col-md-12"> <div class="jumbotron text-xs-center"> <h1 class="display-1">TuringLab</h1> <p class="display-4">Learning Application</p> </div> </div> </div> <div class="row"> <div class="col-md-12"> <div class="card-deck-wrapper"> <div class="card-deck"> <div class="card" ng-repeat="route in routes" ng-click="route.click()"> <div class="card-block text-xs-center"> <i class="route-icon" ng-class="route.icon"></i> <h2 class="card-title" ng-bind="route.name"></h2> <p class="card-text lead" ng-bind="route.description"></p> </div> </div> </div> </div> </div> </div> </div> </div>'),
a.put("views/learn/brick.html",'<!-- sidepanel --> <div class="tile" ng-class="layout.sidebar"> <navigation-bar left="navigation.back"></navigation-bar> <div class="content"> <div class="row"> <div class="col-xs-12"> <brick-card ng-class="layout.brick" brick="bricks.left"></brick-card> </div> </div> <div class="row" ng-class="layout.bricks" ng-repeat="brick in bricks.left.bricks"> <div class="col-xs-12"> <brick-card brick="brick" open-brick="open_brick" active="brick._id === bricks.right._id"> </brick-card> </div> <div class="col-xs-11 col-xs-offset-1"> <brick-card brick="brick" ng-if="brick._id" ng-repeat="brick in brick.bricks"> </brick-card> </div> </div> <div class="row" ng-if="page.show()"> <div class="col-xs-6"> <button class="btn btn-previous" ng-bind="page.previous.text" ng-class="page.previous.style" ng-click="page.previous.click()" ng-disabled="!page.previous.active()"> </button> </div> <div class="col-xs-6"> <button class="btn btn-next" ng-bind="page.next.text" ng-class="page.next.style" ng-click="page.next.click()" ng-disabled="!page.next.active()"> </button> </div> </div> </div> </div> <!-- Main --> <div class="tile" ng-class="layout.viewer"> <brick-window layout="layout" brick="bricks.right"></brick-window> <!-- \n  <development-placeholder\n    ng-if="layout.editor">\n  </development-placeholder>\n  <navigation-bar></navigation-bar>\n  <div class="content" ng-if="!layout.editor">\n    <div class="row">\n      <div class="col-md-12">\n        <brick-card\n          brick="bricks.right"\n          ng-if="bricks.right">\n        </brick-card>\n      </div>\n    </div>\n    <div class="row" ng-repeat="brick in bricks.right.bricks">\n      <div class="col-md-12">\n        <brick-card\n          brick="brick"\n          open="open_brick">\n        </brick-card>\n      </div>\n    </div>\n  </div>\n   --> </div>'),a.put("views/learn/group.html",'<div class="tile"> <navigation-bar left="navigation.back"></navigation-bar> <div class="content"> <div class="row"> <div class="col-md-12"> <group-card group="group"></group-card> </div> </div> <div class="row"> <div class="col-md-12"> <div class="card-columns"> <brick-card brick="brick" ng-click="click_brick(brick)" ng-repeat="brick in group.bricks"> </brick-card> </div> </div> </div> </div> </div>'),a.put("views/learn/home.html",'<div class="tile"> <navigation-bar left="navigation.back"></navigation-bar> <div class="container-fluid"> <div class="row"> <div class="col-md-12"> <div class="jumbotron text-xs-center"> <h1 class="display-4">Learn Home</h1> </div> </div> </div> <div class="row"> <div class="col-md-12"> <ul class="nav nav-tabs"> <li class="nav-item" ng-repeat="tab in tabs"> <a href="" class="nav-link" ng-click="tab.click()" ng-class="tab.style()"> {{tab.title}} </a> </li> </ul> </div> </div> <div class="row"> <div class="wall"> <div class="brick" ng-repeat="brick in bricks"> <brick-card brick="brick" ng-click="open_brick(brick)"> </brick-card> </div> </div> </div> <div class="row" ng-repeat="group in groups"> <div class="col-md-12"> <div class="jumbotron group-jumbotron"> <h2>{{group.name}}</h2> <h4 class="lead text-muted">{{group.description}}</h4> </div> </div> <div class="wall"> <div class="brick" ng-repeat="brick in group.bricks"> <brick-card brick="brick" ng-click="open_brick(brick)"> </brick-card> </div> </div> </div> </div> </div>'),a.put("views/learn/wall.html",""),a.put("views/login/login.html",'<div class="container overflow-scroll"> <div class="row padding-vertical"> <div class="col-xs-12"> <div class="alert alert-danger" role="alert" ng-if="login.error.show"> <strong>{{login.error.title}}: </strong> {{login.error.message}} </div> <form ng-submit="login.submit()"> <fieldset class="form-group" ng-if="login.show(\'role\')"> <label for="role">Type of User</label> <select class="form-control" id="role" ng-model="login.user.role"> <option value="student">Student</option> <option value="instructor">Instructor</option> </select> </fieldset> <fieldset class="form-group" ng-if="login.show(\'email\')"> <label for="email">Email Address</label> <input type="email" class="form-control" id="email" ng-model="login.user.email" placeholder="Email Address"> </fieldset> <fieldset class="form-group" ng-if="login.show(\'group\')"> <label for="group">Group</label> <input type="text" class="form-control" id="group" ng-model="login.user.group" placeholder="Group"> <small class="text-muted" ng-if="login.show(\'login\')"> Don\'t have a group? <a href="" ng-click="login.mode(\'login\',\'username\')">Login using a Username</a> </small> </fieldset> <fieldset class="form-group" ng-if="login.show(\'name\')"> <label for="name">Name</label> <input type="text" class="form-control" id="name" ng-model="login.user.name" placeholder="Name"> </fieldset> <fieldset class="form-group" ng-if="login.show(\'username\')"> <label for="username">Username</label> <input type="text" class="form-control" id="username" ng-model="login.user.username" placeholder="Username"> <small class="text-muted" ng-if="login.show(\'login\')"> Don\'t have a username? <a href="" ng-click="login.mode(\'login\',\'group\')">Login using Group and Name</a> </small> <small class="text-muted" ng-if="login.show(\'create\')"> Leave your username blank and we will create one for your from your group and name </small> </fieldset> <fieldset class="form-group"> <label for="password">Password</label> <input type="password" class="form-control" id="password" ng-model="login.user.password" placeholder="Password"> </fieldset> <fieldset class="form-group" ng-if="login.show(\'login\')"> <button type="submit" class="btn btn-primary">Login</button> <small class="text-muted">Don\'t have an account already? <a href="" ng-click="login.mode(\'create\')">Create an Account</a> </small> </fieldset> <fieldset class="form-group" ng-if="login.show(\'create\')"> <button type="submit" class="btn btn-primary">Create an Account</button> <small class="text-muted">Already have an account? <a href="" ng-click="login.mode(\'login\')">Login Here</a> </small> </fieldset> </form> </div> </div> </div>'),a.put("views/user/browser.html",'<div class="content"> <div class="row"> <div class="col-md-4"> <div class="input-group"> <span class="input-group-addon"> Role </span> <dropdown-input class="input-group-btn" selected options="roles"> </dropdown-input> </div> </div> <div class="col-md-8"> <div class="input-group"> <span class="input-group-addon"> <i class="ion-search"></i> </span> <input type="text" class="form-control" placeholder="Search" ng-model="query.search"> </div> </div> </div> <br> <div class="row"> <div class="col-md-12"> <div class="card-columns"> <drag-frame data="user" channel="user" edit="edit_user" ng-repeat="user in users"> <user-card user="user" ng-click="edit_user(user)"></user-card> </drag-frame> </div> </div> </div> </div>'),a.put("views/user/editor.html",'<div class="container"> <form ng-submit="save_user()"> <div class="row"> <div class="col-sm-10 col-sm-offset-2"> <h2>User Details</h2> </div> </div> <div class="form-group row"> <label for="username" class="col-sm-2 form-control-label">Username</label> <div class="col-sm-10"> <input type="text" class="form-control" id="username" placeholder="Username" ng-model="user.username"> </div> </div> <div class="form-group row"> <label for="first-name" class="col-sm-2 form-control-label">First Name</label> <div class="col-sm-10"> <input type="text" class="form-control" id="first-name" placeholder="First Name" ng-model="user.first_name"> </div> </div> <div class="form-group row"> <label for="last-name" class="col-sm-2 form-control-label">Last Name</label> <div class="col-sm-10"> <input type="text" class="form-control" id="last-name" placeholder="Last Name" ng-model="user.last_name"> </div> </div> <div class="form-group row"> <label for="date-of-birth" class="col-sm-2 form-control-label">Date of Birth</label> <div class="col-sm-10"> <input type="text" class="form-control" id="date-of-birth" placeholder="Date of Birth" ng-model="date_of_birth"> </div> </div> <div class="form-group row"> <label for="school" class="col-sm-2 form-control-label">School</label> <div class="col-sm-10"> <md-autocomplete id="school" md-selected-item="user.school" md-search-text="school_search_text" md-items="school in search_schools(school_search_text)" md-item-text="school.school_name"> <span md-highlight-text="school_search_text">{{school.school_name}}</span> </md-autocomplete> </div> </div> <div class="form-group row"> <label for="email" class="col-sm-2 form-control-label">Email</label> <div class="col-sm-10"> <input type="email" class="form-control" id="email" placeholder="Email" ng-model="user.email"> </div> </div> <div class="form-group row" ng-if="!user._id"> <label for="password" class="col-sm-2 form-control-label">Password</label> <div class="col-sm-10"> <input id="password" type="password" class="form-control" placeholder="Password" ng-model="user.password"> </div> </div> <div class="form-group row"> <div class="col-sm-offset-2 col-sm-10"> <button type="submit" class="btn btn-primary">Save User</button> </div> </div> </form> <form ng-submit="reset_password()" ng-if="user._id"> <div class="row"> <div class="col-sm-10 col-sm-offset-2"> <h2>Reset Password</h2> </div> </div> <div class="form-group row"> <label for="password" class="col-sm-2 form-control-label">New Password</label> <div class="col-sm-10"> <input id="password" type="password" class="form-control" placeholder="New Password" ng-model="user.password"> </div> </div> <div class="form-group row"> <div class="col-sm-offset-2 col-sm-10"> <button type="submit" class="btn btn-primary">Reset Password</button> </div> </div> </form> </div>')}]);