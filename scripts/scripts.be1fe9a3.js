"use strict";angular.module("turingEditorApp",["Config","ngAnimate","ngCookies","ngResource","ngSanitize","ngTouch","ui.router","ui.codemirror","angularScratchblocks","btford.markdown","ngTagsInput","ngFileUpload","ang-drag-drop","angular-sortable-view","anguvideo"]),angular.module("turingEditorApp").config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("home",{url:"/",templateUrl:"views/home/home.html",controller:"HomeController",access:{auth:!1}}).state("login",{url:"/login",templateUrl:"views/login/login.html",controller:"LoginController",controllerAs:"login",access:{auth:!1}}).state("edit",{url:"/edit",templateUrl:"views/edit/edit.html",controller:"EditController",access:{auth:!0,role:"instructor"},"abstract":!0}).state("edit.brick",{url:"/brick/:view_brick","abstract":!0,views:{viewer:{templateUrl:"views/brick/brick-viewer.html",controller:"BrickViewerController"},selector:{template:'<div class="tile tile-full" ui-view="selector"></div>'}}}).state("edit.brick.browser",{url:"",views:{selector:{templateUrl:"views/brick/brick-browser.html",controller:"BrickBrowserController"}}}).state("edit.brick.editor",{url:"/:edit_brick/:format","abstract":!0,views:{selector:{templateUrl:"views/resource/resource-selector.html",controller:"ResourceSelectorController"}},params:{format:"text"}}).state("edit.brick.editor.browser",{url:"",views:{brick:{templateUrl:"views/brick/brick-editor.html",controller:"BrickEditorController"},resource:{templateUrl:"views/resource/resource-browser.html",controller:"ResourceBrowserController"}}}).state("edit.brick.editor.editor",{url:"/:resource",views:{brick:{templateUrl:"views/brick/brick-editor.html",controller:"BrickEditorController"},resource:{templateUrl:"views/resource/resource-editor.html",controller:"ResourceEditorController"}}})}]),angular.module("turingEditorApp").config(["$httpProvider",function(a){a.interceptors.push("Interceptor")}]).factory("Interceptor",["$cookieStore",function(a){return{request:function(b){return b.headers=b.headers||{},a.get("token")&&(b.headers.Authorization="Bearer "+a.get("token")),b}}}]).run(["$rootScope","Principal","Authorization",function(a,b,c){a.$on("$stateChangeStart",function(d,e,f){a.next=e,a.current=f,b.isLoggedIn()||c.authorize()})}]),angular.module("turingEditorApp").directive("brickCard",function(){function a(a){}return a.$inject=["$scope"],{templateUrl:"components/brick-card/brick-card.html",restrict:"E",replace:!0,controller:a,scope:{brick:"=brick"}}}),angular.module("turingEditorApp").directive("buttonCard",function(){return{templateUrl:"components/button-card/button-card.html",restrict:"E",scope:{title:"=title",text:"=text",button:"=button"}}}),angular.module("turingEditorApp").directive("checkmarkEditor",function(){return{templateUrl:"components/checkmark-editor/checkmark-editor.html",restrict:"E",scope:{heading:"=heading",checkmark:"=checkmark"}}}),angular.module("turingEditorApp").directive("codeDisplay",function(){function a(a){var b;a.$watch("data.language",function(c){var d=a.data.language;"html"===d&&(d="htmlmixed"),b&&b.setOption("mode",d)}),a.options={readOnly:"nocursor",viewportMargin:1/0,onLoad:function(a){b=a,b.on("mousedown",function(a,b){b.preventDefault()})}},a.display={scratchblock:function(){return"scratch"===a.data.language},codemirror:function(){return!this.scratchblock()}}}return a.$inject=["$scope"],{templateUrl:"components/code-display/code-display.html",restrict:"AE",controller:a,scope:{data:"=data"}}}),angular.module("turingEditorApp").directive("codeEditor",function(){function a(){var a=this,b=function(){};this.languages=["python","scratch","html","css","javascript"],this.data.language=this.data.language||this.languages[0],this.options={keyMap:"sublime",lineNumbers:!0,lineWrapping:!0,onLoad:function(c){c.setOption("lineWrapping",!0),b=function(){var b=a.data.language;"html"===b&&(b="htmlmixed"),c.setOption("mode",b)}}}}return{templateUrl:"components/code-editor/code-editor.html",restrict:"E",replace:!0,controller:a,controllerAs:"code_editor",bindToController:{data:"=data"},scope:{}}}),angular.module("turingEditorApp").directive("componentCard",["Editor",function(a){function b(b){b.editor=a,b.hidden={toggle:function(){b.component.hidden.show=!b.component.hidden.show}},b.checkmark={toggle:function(){b.component.action.completed=!b.component.action.completed,b.component.update()}},b.detailStyle=function(){return b.component&&(b.component.checkmark||b.component.hidden&&b.component.hidden.active||b.editor.show())?"padding":void 0},b.showHidden=function(){return b.component&&b.component.hidden&&b.component.hidden.active&&b.component.hidden.show}}return b.$inject=["$scope"],{templateUrl:"components/component-card/component-card.html",restrict:"E",controller:b,scope:{component:"=component"}}}]),angular.module("turingEditorApp").directive("componentDetailsEditor",function(){function a(a){a.$watch("component",function(a){})}return{templateUrl:"components/component-details-editor/component-details-editor.html",restrict:"E",link:a,scope:{component:"=component"}}}),angular.module("turingEditorApp").directive("componentDetails",function(){function a(a){a.image={style:function(){return a.component.image.active&&"thumbnail"==a.component.image.display&&a.component.text.active?"cd-thumbnail":a.component.image.active&&"cover"==a.component.image.display&&a.component.text.active?"cd-cover":void 0}},a.text={style:function(){return a.component.image.active&&a.component.text.active?"thumbnail"==a.component.image.display?"cd-text-min":"cd-text":void 0}}}return a.$inject=["$scope"],{templateUrl:"components/component-details/component-details.html",restrict:"E",controller:a,scope:{component:"=component"}}}),angular.module("turingEditorApp").directive("componentEditor",function(){function a(a){a.$watch("component",function(b){console.log(b),b=b||{},a.displayComponent={},angular.copy(a.component,a.displayComponent)}),a.save=function(){angular.copy(a.displayComponent,a.component),a.component.$save()}}return{templateUrl:"components/component-editor/component-editor.html",restrict:"E",link:a,scope:{component:"=component",save:"=save"}}}),angular.module("turingEditorApp").directive("developmentEnvironment",["$sce","$state","$timeout","Editor","Environment",function(a,b,c,d,e){function f(f,g){var h,i="hidden",j=g.find("iframe"),k=g.find("div.environment");f.navigation={toggle:{text:function(){return d.control()?"Enable Author Mode":void 0},icon:function(){return d.control()?"ion-toggle":void 0},click:d.toggle},reload:{text:function(){return"Reload"},icon:function(){return"ion-refresh"},click:function(){var a=j[0].src;j[0].src="",c(function(){j[0].src=a})}}},f.environment={show:function(){return"small"===i||"large"===i},small:function(){return"small"===i},open:function(){b.go("edit.project",{project:h._id})}},f.$watch(function(){return d.get("project")},function(b){if(h=b,h&&h.starter&&h.starter.url){var c=h.starter.url;f.environment.url=a.trustAsResourceUrl(c)}}),e.listen(function(a){a.width&&a.height?(i="large",k.width(a.width),k.height(a.height)):f.environment.url?(i="small",k.width(0),k.height(0)):(i="hidden",k.width(0),k.height(0))})}return{templateUrl:"components/development-environment/development-environment.html",restrict:"E",link:f,scope:{url:"=url"}}}]),angular.module("turingEditorApp").directive("developmentPlaceholder",["$interval","Environment",function(a,b){function c(c,d){function e(){var a=h.width(),c=h.height();f===a&&g===c||(f=a,g=c,b.update({width:h.width(),height:h.height()}))}var f,g,h=d.find("div.content");a(e,600),d.on("$destroy",function(){b.update()})}return{template:'<div id="development-placeholder" class="content"></div>',restrict:"E",link:c}}]),angular.module("turingEditorApp").directive("draftToggle",function(){function a(a){this.style=function(){return a.draft?"text-primary":"text-muted"},this.message=function(){return a.draft?"Draft":"Published"}}return a.$inject=["$scope"],{templateUrl:"components/draft-toggle/draft-toggle.html",restrict:"E",controller:a,controllerAs:"draftToggle",scope:{draft:"=draft"}}}),angular.module("turingEditorApp").directive("dragFrame",function(){function a(a){}return a.$inject=["$scope"],{templateUrl:"components/drag-frame/drag-frame.html",restrict:"E",replace:!0,transclude:!0,controller:a,scope:{data:"=",channel:"@"}}}),angular.module("turingEditorApp").directive("dropdownInput",function(){function a(){var a=this,b=function(a){this.value=a};b.prototype.click=function(){a.selected=this.value},b.prototype.style=function(){return a.selected==this.value?"active":void 0},this.options=this.options.map(function(a){return new b(a)})}return{templateUrl:"components/dropdown-input/dropdown-input.html",restrict:"E",replace:!0,controller:a,controllerAs:"dropdown_input",bindToController:{selected:"=",options:"="},scope:{}}}),angular.module("turingEditorApp").directive("genericCard",["Editor",function(a){function b(b,c){function d(){return b.draft?"draft":c.status(b.action)}b.editor=a,b.information={show:function(){return"untouched"!==d()},text:function(){var a=d();return"draft"===a?"Draft":"remixed"===a?"Remixed":"edited"===a?"Edited":"completed"===a?"Completed":"started"===a?"Started":"opened"===a?"Opened":void 0},style:function(){var a=d();return"completed"===a?"btn-success":"opened"===a?"btn-secondary":"btn-primary"}}}return b.$inject=["$scope","Action"],{templateUrl:"components/generic-card/generic-card.html",restrict:"E",controller:b,scope:{title:"=title",image:"=image",description:"=description",draft:"=draft",action:"=action",click:"=click"}}}]),angular.module("turingEditorApp").directive("headerCard",function(){function a(a,b){function c(){return a.draft?"draft":b.status(a.action)}a.information={show:function(){return"untouched"!==c()},text:function(){var a=c();return"draft"===a?"Draft":"remixed"===a?"Remixed":"edited"===a?"Edited":"completed"===a?"Completed":"started"===a?"Started":"opened"===a?"Opened":void 0},style:function(){var a=c();return"completed"===a?"btn-success":"opened"===a?"btn-secondary":"btn-primary"}}}return a.$inject=["$scope","Action"],{templateUrl:"components/header-card/header-card.html",restrict:"E",controller:a,scope:{title:"=title",image:"=image",description:"=description",action:"=action",draft:"=draft",click:"=click"}}}),angular.module("turingEditorApp").directive("hiddenEditor",["Component",function(a){function b(b){b.createHidden=function(){b.hidden?b.hidden=null:b.hidden=b.hidden||new a}}return b.$inject=["$scope"],{templateUrl:"components/hidden-editor/hidden-editor.html",restrict:"E",controller:b,scope:{heading:"=heading",hidden:"=ishidden"}}}]),angular.module("turingEditorApp").directive("imageDisplay",function(){function a(a){a.image={show:function(){return!!a.url},style:function(){return this.show()?a.display:void 0}}}return a.$inject=["$scope"],{templateUrl:"components/image-display/image-display.html",restrict:"E",controller:a,scope:{url:"=url",display:"=display"}}}),angular.module("turingEditorApp").directive("imageUploader",function(){function a(a,b){a.callback=a.callback||angular.noop,a.data=a.data||{},a.$watch("files",function(){a.files&&a.files.length>0&&(a.file=a.files[0])}),a.$watch("file",function(){null!=a.file&&a.upload(a.file)}),a.upload=function(c){c&&!c.$error&&(a.data.label=a.data.label||c.name,b.upload(c).then(function(b){a.data.image=b,a.callback()},function(a){console.error(a)}))}}return a.$inject=["$scope","Uploader"],{templateUrl:"components/image-uploader/image-uploader.html",restrict:"E",controller:a,scope:{data:"=data",callback:"=callback"}}}),angular.module("turingEditorApp").directive("languageEditor",function(){function a(a){var b=function(){};a.language=a.language||{};var c=function(a){this.language=a};c.prototype.select=function(){a.language=this.language,b()},c.prototype.selected=function(){return a.language===this.language},c.prototype.style=function(){return this.selected()?"active":void 0},a.languages=["Python","Scratch","Web"].map(function(a){return new c(a)})}return a.$inject=["$scope"],{templateUrl:"components/language-editor/language-editor.html",restrict:"E",controller:a,scope:{heading:"=heading",language:"=language"}}}),angular.module("turingEditorApp").directive("linkEditor",function(){function a(a){a.options=["tab","embed","editor"]}return a.$inject=["$scope"],{templateUrl:"components/link-editor/link-editor.html",restrict:"E",controller:a,scope:{data:"=data",callback:"=callback"}}}),angular.module("turingEditorApp").directive("navbar",["$state","$stateParams","Principal",function(a,b,c){function d(d){var e=this;this.loggedIn=!1,d.$watch(c.getCurrentUser,function(a){e.user=a,c.isLoggedInAsync().then(function(a){console.log(a),e.loggedIn=a})}),this.logout=function(){c.logout(),a.transitionTo(a.current,b,{reload:!0,inherit:!1,notify:!0})},this.routes=["Language","Project"].map(function(a){return{name:a,link:"#/"+a.toLowerCase()}})}return d.$inject=["$scope"],{templateUrl:"components/navbar/navbar.html",restrict:"E",controller:d,controllerAs:"navbar",scope:{}}}]),angular.module("turingEditorApp").directive("navigationBar",function(){function a(a){}return a.$inject=["$scope"],{templateUrl:"components/navigation-bar/navigation-bar.html",restrict:"E",controller:a,scope:{left:"=left",center:"=center",right:"=right"}}}),angular.module("turingEditorApp").directive("pieceDisplay",["$sce",function(a){function b(b){var c=this;b.$watch(function(){return c.piece=c.piece||{},c.piece.data?c.piece.data.link:void 0},function(){c.piece.data&&c.piece.data.link&&(c.piece.data.trusted_link=a.trustAsResourceUrl(c.piece.data.link))})}return b.$inject=["$scope"],{templateUrl:"components/piece-display/piece-display.html",restrict:"E",replace:!0,controller:b,controllerAs:"$piece",bindToController:{piece:"="},scope:{}}}]),angular.module("turingEditorApp").directive("projectEditor",function(){function a(a){a.$watch("project",function(b){b=b||{},a.displayProject={},angular.copy(a.project,a.displayProject),a.displayProject.provider="TuringLab",a.displayProject.starter=b.starter||{},a.displayProject.image={url:b.image.url,display:"thumbnail"}}),a.save=function(){var b=a.project.steps;angular.copy(a.displayProject,a.project),a.project.steps=b,a.project.$save()}}return{templateUrl:"components/project-editor/project-editor.html",restrict:"E",link:a,scope:{project:"=project",save:"=save"}}}),angular.module("turingEditorApp").directive("propertiesEditor",["Component",function(a){function b(a){console.log(a.component)}return b.$inject=["$scope"],{templateUrl:"components/properties-editor/properties-editor.html",restrict:"E",controller:b,scope:{heading:"=heading",component:"=component",show:"=show"}}}]),angular.module("turingEditorApp").directive("resourceCard",function(){function a(a){}return a.$inject=["$scope"],{templateUrl:"components/resource-card/resource-card.html",restrict:"E",replace:!0,controller:a,scope:{resource:"=resource"}}}),angular.module("turingEditorApp").directive("stepEditor",function(){function a(a){a.$watch("step",function(b){b=b||{},a.displayStep={},angular.copy(a.step,a.displayStep)}),a.save=function(){var b=a.step.components;angular.copy(a.displayStep,a.step),a.step.components=b,a.step.$save()}}return{templateUrl:"components/step-editor/step-editor.html",restrict:"E",link:a,scope:{step:"=step",save:"=save"}}}),angular.module("turingEditorApp").directive("textEditor",function(){function a(){this.styles=["heading","subheading","content"],this.data.style=this.data.style||this.styles[0]}return{templateUrl:"components/text-editor/text-editor.html",restrict:"E",controller:a,controllerAs:"text_editor",bindToController:{data:"="}}}),angular.module("turingEditorApp").directive("textInput",function(){function a(){this.format=this.format||"plain",this.options={keyMap:"sublime",mode:this.format,lineNumbers:!1,lineWrapping:!0}}return{templateUrl:"components/text-input/text-input.html",restrict:"E",replace:!0,controller:a,controllerAs:"text_input",bindToController:{text:"=",format:"@"},scope:{}}}),angular.module("turingEditorApp").directive("toggleInput",function(){function a(a){this.style=function(){return a.ngModel?"ion-toggle-filled text-primary":"ion-toggle text-muted"},this.click=function(){a.ngModel=!a.ngModel}}return a.$inject=["$scope"],{template:'<i class="icon toggle-input" ng-click="toggle.click()" ng-class="toggle.style()"></i>',restrict:"E",controller:a,controllerAs:"toggle",scope:{ngModel:"="}}}),angular.module("turingEditorApp").directive("videoEditor",function(){function a(a){}return a.$inject=["$scope"],{templateUrl:"components/video-editor/video-editor.html",restrict:"E",controller:a,scope:{data:"=data",callback:"=callback"}}}),angular.module("Config",[]).constant("server",{name:"staging",endpoint:"https://quiet-bastion-25859.herokuapp.com/"}),angular.module("turingEditorApp").service("Brick",["$Resource",function(a){return new a("bricks")}]),angular.module("turingEditorApp").service("Group",["$Resource",function(a){return new a("groups")}]),angular.module("turingEditorApp").service("Resource",["$Resource",function(a){return new a("resources")}]),angular.module("turingEditorApp").service("User",["$Resource",function(a){return new a("users")}]),angular.module("turingEditorApp").service("Wall",["$Resource",function(a){return new a("walls")}]),angular.module("turingEditorApp").factory("Authorization",["$state","$location","$rootScope","Principal",function(a,b,c,d){var e=["student","instructor","admin"];return{authorize:function(){return d.isLoggedInAsync().then(function(b){if(c.next.access&&c.next.access.auth)if(b){if(c.next.access.role){var f=c.next.access.role,g=e.indexOf(f),h=d.getCurrentUser().role,i=e.indexOf(h);g>i&&a.go(c.current)}}else a.go("login")})}}}]),angular.module("turingEditorApp").service("Editor",["Principal",function(a){var b,c={},d=!0;this.set=function(a,d,e){d=d||c[a],c[a]=d,e||(console.log(a),b=a)},this.show=function(c){return a.isInstructor()?c?d&&b===c:d:!1},this.get=function(a){return a=a||b,c[a]},this.control=function(){return a.isInstructor()},this.toggle=function(){d=!d}}]),angular.module("turingEditorApp").service("Environment",function(){function a(){var a=b||{};c&&c(a)}var b,c;this.reset=function(){accesser=angular.noop},this.update=function(c){b=c,a()},this.listen=function(b){c=b,a()}}),angular.module("turingEditorApp").factory("Principal",["$rootScope","$http","User","$cookieStore","$q","server",function(a,b,c,d,e,f){var g={};return d.get("token")&&(g=c.get({id:"me"})),{login:function(a,h){var i=e.defer();return h=h||angular.noop,b.post(f.endpoint+"auth/local",a).success(function(a){return console.log(a),d.put("token",a.token),g=c.get({id:"me"}),i.resolve(a),h()}).error(function(a){return this.logout(),i.reject(a),h(a)}.bind(this)),i.promise},logout:function(){d.remove("token"),g={}},createUser:function(a,b){var e=b||angular.noop;return c.save(a,function(a){return d.put("token",a.token),g=c.get({id:"me"}),e()},function(a){return this.logout(),e(a)}.bind(this)).$promise},changePassword:function(a,b,d){var e=d||angular.noop;return c.changePassword({id:g._id},{oldPassword:a,newPassword:b},function(a){return e(a)},function(a){return e(a)}).$promise},getCurrentUser:function(){return g},isLoggedIn:function(){return g.hasOwnProperty("_id")},isLoggedInAsync:function(){return e(function(a){g.hasOwnProperty("$promise")?g.$promise.then(function(){a(!0)})["catch"](function(){a(!1)}):a(g.hasOwnProperty("_id")?!0:!1)})},isAdmin:function(){return g.role&&"admin"===g.role},isInstructor:function(){return g.role&&("admin"===g.role||"instructor"===g.role)},getToken:function(){return d.get("token")}}}]),angular.module("turingEditorApp").factory("$Resource",["$resource","server",function(a,b){return function(c,d,e){c=b.endpoint+c+"/:id";var f={update:{method:"PUT",isArray:!1},create:{method:"POST"}};e=angular.extend(f,e);var g={id:"@_id"};d=angular.extend(g,d);var h=a(c,d,e);return h.prototype.$save=function(a,b,c){return this._id?this.$update(a,b,c):this.$create(a,b,c)},h}}]),angular.module("turingEditorApp").service("Sidebar",function(){function a(){return{text:function(){return"Hide"},icon:function(){return"ion-chevron-left"}}}function b(){return{text:function(){return"Show"},icon:function(){return"ion-chevron-right"}}}var c=this,d=!0,e=angular.noop;this.show=function(){return d},this.watch=function(a){e=a},this.toggle=function(){d=!d,d?c.button=a():c.button=b(),c.button.click=c.toggle,e()},this.button=a(),this.button.click=this.toggle}),angular.module("turingEditorApp").service("Uploader",["$q","$http","Upload","server",function(a,b,c,d){var e=d.endpoint+"upload";return{upload:function(c){return a(function(a,d){b.post(e,{filename:c.name,filetype:c.type}).then(function(b){var e=b.data;console.log(e);var f=new XMLHttpRequest;f.open("PUT",e.signed),f.setRequestHeader("x-amz-acl","public-read"),f.onload=function(){a(e.url)},f.onerror=d,f.send(c)})})}}}]),angular.module("turingEditorApp").controller("BrickBrowserController",["$scope","$state","Brick",function(a,b,c){function d(){var b={format:a.query.format,search:a.query.search,limit:20};b.format.length||delete b.format,a.bricks=c.query(b)}a.formats=["project","lesson","quiz","concept","step","component"],a.query={format:"",search:""},a.$watch("query",d,!0)}]),angular.module("turingEditorApp").controller("BrickEditorController",["$scope","$state","Brick",function(a,b,c){var d=function(a){a.resource=a.resource||a._id,angular.extend(this,a)};d.prototype.index=function(){var b=this;return a.brick.pieces.findIndex(function(a){return a.resource===b.resource})},d.prototype.edit=function(){b.go("edit.brick.editor.editor",{format:this.format,resource:this.resource})},d.prototype.remove=function(){var b=this.index();a.brick.pieces.splice(b,1),a.brick.$store()},c.prototype.$process=function(){this.pieces=this.pieces.map(function(a){return new d(a)})},c.prototype.$store=function(){var a=this;this.$save(function(){b.go(b.current.name,{edit_brick:a._id},{reload:!1,notify:!1}),a.$process()})},b.params.edit_brick?(a.brick=c.get({id:b.params.edit_brick}),a.brick.$promise.then(function(){a.brick.$process()})):a.brick=new c({format:"project",pieces:[],bricks:[]}),a.piece_drop=function(b,c,e){console.log(c),null==e&&(e=a.brick.pieces.length);var f=new d(c),g=f.index();g>-1&&a.brick.pieces.splice(g,1),a.brick.pieces.splice(e,0,f),a.brick.$store()};var e=!1;a.drop_zone={style:function(){return e?"visible":void 0}},a.$on("ANGULAR_DRAG_START",function(b,c,d,f){"piece"===d&&a.$apply(function(){e=!0})}),a.$on("ANGULAR_DRAG_END",function(b,c,d){"piece"===d&&a.$apply(function(){e=!1})}),a.default_pieces=[{format:"text",data:{text:"New Brick",style:"heading"}},{format:"text",data:{text:"Drag some resources in to get started",style:"subheading"}}],a.formats=["project","lesson","quiz","concept","step","component"]}]),angular.module("turingEditorApp").controller("BrickViewerController",["$scope","$state","Brick",function(a,b,c){c.prototype.$process=function(){this.bricks=this.bricks.map(function(a){return new c(a)})},c.prototype.index=function(){var b=this;return a.brick.bricks.findIndex(function(a){return b._id===a._id})},c.prototype.edit=function(){b.go("edit.brick.editor.browser",{edit_brick:this._id})},c.prototype.remove=function(){var b=this.index();a.brick.bricks.splice(b,1),a.brick.$save()},c.prototype.click=function(){this.bricks.length>0&&b.go("edit.brick.browser",{view_brick:this._id})},a.brick=c.get({id:b.params.view_brick}),a.brick.$promise.then(function(){a.brick.$process()}),a.brick_drop=function(b,d,e){null==e&&(e=a.brick.bricks.length);var f=new c(d),g=f.index();g>-1&&a.brick.bricks.splice(g,1),a.brick.bricks.splice(e,0,f),a.brick.$save(function(){a.brick.$process()})};var d=!1;a.drop_zone={style:function(){return d?"visible":void 0}},a.$on("ANGULAR_DRAG_START",function(b,c,e,f){"brick"===e&&a.$apply(function(){d=!0})}),a.$on("ANGULAR_DRAG_END",function(b,c,e){"brick"===e&&a.$apply(function(){d=!1})})}]),angular.module("turingEditorApp").controller("EditController",["$scope","$state",function(a,b){}]),angular.module("turingEditorApp").controller("HomeController",["$scope","$state","Group",function(a,b,c){a.groups=c.query()}]),angular.module("turingEditorApp").controller("LoginController",["$location","Principal",function(a,b){var c,d,e=this;this.user={},this.submit=function(){function d(b){return b?e.error.handle(b):void a.path("/")}"create"===c?b.createUser(this.user,d):b.login(this.user,d)},this.mode=function(a,b){c=a||"login",d=b||"username","group"===d&&delete this.user.username},this.mode(),this.show=function(a){if(c===a)return!0;if("login"===c)if("username"===d){if("username"===a)return!0}else{if("name"===a)return!0;if("group"===a)return!0}else{if("role"===a)return!0;if("username"===a)return!0;if("name"===a)return!0;if("group"===a)return"student"===e.user.role;if("email"===a)return"instructor"===e.user.role}return!1},this.error={show:!1,handle:function(a){if(this.title=a.statusText||a.status||"Error",this.message=a.message||a.statusText,console.log(a),a.data&&(this.message=a.data.message||a.data,a.data.errors)){console.log(a.data.errors);for(var b in a.data.errors)console.log(b),this.title=a.data.errors[b].name||this.title,this.message=a.data.errors[b].message||this.message}this.show=!0},close:function(){this.show=!1}}}]),angular.module("turingEditorApp").controller("ResourceBrowserController",["$scope","$state","Resource",function(a,b,c){function d(){c.query({format:b.params.format,search:a.query,limit:10},function(b){a.resources=b})}c.prototype.index=function(){var b=this;return a.resources.findIndex(function(a){return b._id===a._id})},c.prototype.edit=function(){b.go("edit.brick.editor.editor",{resource:this._id})},c.prototype.remove=function(){var b=this.index();confirm("Delete this resource?")&&this.$remove(function(){a.resources.splice(b,1)})},a.query="",a.$watch("query",d)}]),angular.module("turingEditorApp").controller("ResourceEditorController",["$scope","$state","Resource",function(a,b,c){b.params.resource?(a.resource=c.get({id:b.params.resource}),a.resource.$promise.then(function(){a.resource.format!==b.params.format&&b.go(b.current.name,{resource:null})})):a.resource=new c({format:b.params.format,data:{}}),a.$on("$stateChangeStart",function(){a.resource._id&&a.resource.$save()}),a.save_resource=function(){a.resource.$save(function(){b.go("edit.brick.editor.editor",{resource:a.resource._id},{notify:!1})})}}]),angular.module("turingEditorApp").controller("ResourceSelectorController",["$scope","$state","Resource",function(a,b,c){a.sidebar={buttons:[{label:"text",icon:"ion-document-text"},{label:"image",icon:"ion-images"},{label:"video",icon:"ion-social-youtube"},{label:"code",icon:"ion-code"},{label:"link",icon:"ion-link"},{label:"task",icon:"ion-checkmark-round"},{label:"signal",icon:"ion-log-out"},{label:"assess",icon:"ion-help"}]};var d=function(a){this.label=a.label||"",this.icon=a.icon||"ion-ionic"};d.prototype.click=function(){b.go("edit.brick.editor.browser",{format:this.label})},d.prototype.style=function(){return b.params.format===this.label?"active":void 0},a.sidebar.buttons=a.sidebar.buttons.map(function(a){return new d(a)})}]),angular.module("turingEditorApp").run(["$templateCache",function(a){a.put("components/brick-card/brick-card.html",'<div class="card brick-card"> <piece-display piece="piece" ng-repeat="piece in brick.pieces"></piece-display> </div>'),a.put("components/button-card/button-card.html",'<a ng-click="button.click()" class=""> <div class="row"> <div class="tl-card" id="bc-card"> <div class="bc-text"> <h4 class="bc-title">{{title}}</h4> </div> <div class="bc-create"> <i class="icon ion-plus"></i> </div> </div> </div> </a>'),a.put("components/checkmark-editor/checkmark-editor.html",'<div class="row"> <div class="col-md-12 header"> <h3>{{heading}}</h3> </div> <div class="col-lg-12 header"> <input type="checkbox" ng-model="checkmark"> </div> </div>'),a.put("components/code-display/code-display.html",'<scratchblock ng-if="display.scratchblock()" code="data.code"></scratchblock> <div class="code-display" ng-if="display.codemirror()" ui-codemirror="options" ng-model="data.code"> </div>'),a.put("components/code-editor/code-editor.html",'<div class="card code-editor"> <dropdown-input class="language-dropdown" selected options="code_editor.languages"> </dropdown-input> <div class="code-input" ui-codemirror="code_editor.options" ng-model="code_editor.data.code"> </div> </div>'),a.put("components/component-card/component-card.html",'<div class="tl-card"> <div class="cd-interaction"> <div ng-if="component.checkmark" ng-click="checkmark.toggle()"> <i class="cd-clickable ion-ios-checkmark text-primary" ng-if="component.action.completed"> </i> <i class="cd-clickable ion-ios-circle-outline text-default" ng-if="!component.action.completed"> </i> </div> <div ng-if="component.hidden.active" ng-click="hidden.toggle()"> <i class="cd-clickable ion-help-circled text-primary" ng-if="component.hidden.show"> </i> <i class="cd-clickable ion-help-circled text-default" ng-if="!component.hidden.show"> </i> </div> <div ng-if="editor.show()" ng-click="component.edit()"> <i class="cd-clickable ion-drag" sv-handle></i> <i class="cd-clickable ion-edit text-primary" ng-if="component.editing()"></i> <i class="cd-clickable ion-edit text-default" ng-if="!component.editing()"></i> </div> <div ng-if="!editor.show()"> <sv-handle></sv-handle> </div> </div> <component-details class="cd-detail" component="component" ng-class="detailStyle()"> </component-details> <component-details class="cd-detail" component="component.hidden" ng-if="showHidden()"> </component-details> </div>'),a.put("components/component-details-editor/component-details-editor.html",'<text-editor ng-if="component.text.active" heading="\'Text\'" text="component.text.content"></text-editor> <link-editor ng-if="component.link.active" heading="\'Link\'" link="component.link"></link-editor> <code-editor ng-if="component.code.active" code="component.code"></code-editor> <text-editor ng-if="component.video.active" heading="\'Video\'" text="component.video.url"></text-editor> <image-uploader ng-if="component.image.active" image="component.image"></image-uploader>'),a.put("components/component-details/component-details.html",'<div class="details-container"> <div ng-class="text.style()" ng-if="component.text.active"> <p class="cd-markdown" btf-markdown="component.text.content"></p> </div> <div ng-class="image.style()" ng-if="component.image.active"> <image-display url="component.image.url" display="component.image.display"></image-display> </div> <div class="cd-link" ng-if="component.link.active"> <p><a target="_blank" href="{{component.link.url}}">{{component.link.text}}</a></p> </div> <div class="cd-code" ng-if="component.code.active"> <code-display code="component.code"></code-display> </div> <div class="cd-video" ng-if="component.video.active"> <anguvideo ng-model="component.video.url" width="100%"></anguvideo> </div> </div>'),a.put("components/component-editor/component-editor.html",'<div class="container editor-container"> <div class="row"> <div class="col-lg-6"> <draft-toggle draft="displayComponent.draft"></draft-toggle> <properties-editor heading="\'Properties\'" component="displayComponent" show="true"></properties-editor> <component-details-editor component="displayComponent"></component-details-editor> <div ng-if="displayComponent.hidden.active" class="hidden-editing"> <h2>Help</h2> <component-details-editor component="displayComponent.hidden"></component-details-editor> </div> </div> <div class="col-lg-6"> <component-card component="displayComponent"> </component-card> </div> </div> </div>'),a.put("components/development-environment/development-environment.html",'<div class="environment"> <navigation-bar left="navigation.toggle" center="navigation.reload"> </navigation-bar> <div class="environment-container"> <iframe ng-src="{{environment.url}}"> </iframe> </div> <div class="envrionment-overlay" ng-if="environment.small()" ng-click="environment.open()"> <div>Return to Environment</div> </div> </div>'),
a.put("components/draft-toggle/draft-toggle.html",'<div class="row"> <div class="col-xs-4"> <h4>Mode</h4> </div> <div class="col-xs-4"> <h4 class="draft-toggle-status" ng-class="draftToggle.style()">{{draftToggle.message()}}</h4> </div> <div class="col-xs-4"> <toggle-input class="draft-toggle-input" ng-model="draft"></toggle-input> </div> </div>'),a.put("components/drag-frame/drag-frame.html",'<div class="drag-frame" drag="data" drag-channel="{{channel}}" ui-draggable="true"> <ng-transclude></ng-transclude> <div class="drag-overlay"> <div class="drag-actions"> <button class="drag-edit" ng-if="data.edit" ng-click="data.edit()"> <i class="ion-edit"></i> </button> <button class="drag-move" ng-if="channel"> <i class="ion-arrow-move"></i> </button> <button class="drag-remove" ng-if="data.remove" ng-click="data.remove()"> <i class="ion-trash-b"></i> </button> </div> </div> </div>'),a.put("components/dropdown-input/dropdown-input.html",'<div class="dropdown dropdown-input"> <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> {{dropdown_input.selected}} </button> <div class="dropdown-menu"> <a class="dropdown-item" ng-class="option.style()" ng-click="option.click()" ng-repeat="option in dropdown_input.options"> {{option.value}} </a> </div> </div>'),a.put("components/generic-card/generic-card.html",'<a class="click" href="" ng-click="click()"> <div class="row"> <div class="gc-card tl-card"> <div class="gc-interaction"> <div class="gc-drag-icon" ng-if="editor.show()"> <i class="cd-clickable ion-drag" sv-handle></i> </div> <div ng-if="!editor.show()"> <sv-handle></sv-handle> </div> </div> <div class="gc-image"> <image-display url="image.url" display="\'thumbnail\'"></image-display> </div> <div class="gc-text"> <h2 class="gc-title">{{title}}</h2> <p class="gc-description" btf-markdown="description"></p> </div> <div class="gc-enter"> <div> <i class="icon ion-chevron-right"></i> </div> </div> <div class="gc-info"> <div class="gc-info-box" ng-if="information.show()" ng-class="information.style()"> {{information.text()}} </div> </div> </div> </div> </a>'),a.put("components/header-card/header-card.html",'<div class="row"> <div class="hc-card tl-card"> <div class="hc-image"> <image-display url="image.url" display="\'cover\'"></image-display> </div> <div class="hc-text"> <h2 class="hc-title">{{title}}</h2> <p class="hc-description" btf-markdown="description"></p> </div> <div class="hc-info"> <div class="hc-info-box" ng-class="information.style()"> {{information.text()}} </div> </div> </div> </div>'),a.put("components/hidden-editor/hidden-editor.html",'<div class="row"> <div class="col-md-12 header"> <h3>{{heading}}</h3> </div> <div class="col-md-12 header"> <input type="checkbox" ng-click="createHidden()"> </div> </div>'),a.put("components/image-display/image-display.html",'<div class="img-container"> <div class="img-thumbnail"> <div class="img-preview" ng-class="image.style()"> <img ng-src="{{url}}"> </div> </div> </div>'),a.put("components/image-uploader/image-uploader.html",'<div class="card editor-card"> <div class="drop-container"> <div class="drop-box" ngf-select="upload($file)" ngf-drop="upload($file)" ngf-drag-over-class="\'dragover\'" ngf-multiple="false" ngf-pattern="\'image/*\'"> Click Here or Drop an Image to Upload </div> </div> <input type="text" class="form-control" placeholder="Label" ng-model="data.label"> </div>'),a.put("components/language-editor/language-editor.html",'<div class="row"> <div class="col-md-12 header"> <h3>{{heading}} <div class="btn-group btn-header"> <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Language {{language}} </button> <div class="dropdown-menu"> <a class="dropdown-item" ng-repeat="language in languages" ng-click="language.select()" ng-class="language.style()">{{language.language}}</a> </div> </div> </h3> </div> </div>'),a.put("components/link-editor/link-editor.html",'<div class="card editor-card"> <dropdown-input selected options="options"> </dropdown-input> <input type="text" class="form-control" placeholder="Link" ng-model="data.link"> <input type="text" class="form-control" placeholder="Label" ng-model="data.label"> </div>'),a.put("components/navbar/navbar.html",'<nav class="navbar navbar-dark navbar-fixed-top bg-inverse"> <a class="navbar-brand" href="#/"> <div> <img class="nav-image" src="images/white_icon.088e646a.png"> <span class="hidden-xs-down">TuringLab</span> </div> </a> <nav class="nav navbar-nav hidden-sm-down pull-xs-left"> <a class="nav-item nav-link" ng-repeat="route in navbar.routes" href="{{route.link}}"> {{route.name}} </a> </nav> <nav class="nav navbar-nav pull-xs-right" ng-if="navbar.loggedIn"> <a class="nav-item nav-link" href="" ng-click="navbar.logout()"> <span class="hidden-sm-down">Logout</span> <i class="ion-log-out"></i> </a> </nav> <div class="navbar-brand pull-xs-right">{{navbar.user.name}}</div> </nav>'),a.put("components/navigation-bar/navigation-bar.html",'<div class="nb-row"> <div class="nb-cell"> <a class="btn btn-default nb-left" href="" ng-if="left" ng-click="left.click()"> <i ng-class="left.icon()"></i> {{left.text()}} </a> </div> <div class="nb-cell"> <a class="btn btn-default nb-center" href="" ng-if="center" ng-click="center.click()"> {{center.text()}} <i ng-class="center.icon()"></i> </a> </div> <div class="nb-cell"> <a class="btn btn-default nb-right" href="" ng-if="right" ng-click="right.click()"> {{right.text()}} <i ng-class="right.icon()"></i> </a> </div> </div> <div class="nb-spacer"></div>'),a.put("components/piece-display/piece-display.html",'<div class="piece-display"> <div ng-if="$piece.piece.format == \'image\'"> <img class="piece-image" ng-src="{{$piece.piece.data.image}}"> </div> <div class="piece-text" ng-if="$piece.piece.format == \'text\'"> <p ng-if="$piece.piece.data.style == \'heading\'" class="h4" btf-markdown="$piece.piece.data.text"></p> <p ng-if="$piece.piece.data.style == \'subheading\'" class="lead" btf-markdown="$piece.piece.data.text"></p> <p ng-if="$piece.piece.data.style == \'content\'" btf-markdown="$piece.piece.data.text"></p> </div> <div class="piece-link" ng-if="$piece.piece.format == \'link\'"> <a ng-if="$piece.piece.data.action == \'tab\'" target="_blank" href="{{$piece.piece.data.trusted_link}}" ng-bind="$piece.piece.data.label"></a> <button class="btn btn-primary" ng-if="$piece.piece.data.action == \'editor\'" ng-href="{{$piece.piece.data.trusted_link}}" ng-bind="$piece.piece.data.label"></button> <iframe ng-if="$piece.piece.data.action == \'embed\'" ng-src="{{$piece.piece.data.trusted_link}}"> </iframe> </div> <div class="piece-question" ng-if="$piece.piece.format == \'question\'"> <p btf-markdown="$piece.piece.data.question"></p> <i ng-if="$piece.piece.data.format == \'single\'" class="ion-checkmark-circled"></i> </div> <div class="piece-code" ng-if="$piece.piece.format == \'code\'"> <code-display data="$piece.piece.data"></code-display> </div> <div class="piece-video" ng-if="$piece.piece.format == \'video\'"> <anguvideo ng-model="$piece.piece.data.video" width="100%"></anguvideo> </div> </div>'),a.put("components/project-editor/project-editor.html",'<div class="container editor-container"> <div class="row"> <div class="col-lg-6"> <draft-toggle draft="displayProject.draft"></draft-toggle> <text-editor heading="\'Title\'" text="displayProject.title"></text-editor> <text-editor heading="\'Description\'" text="displayProject.description"></text-editor> <link-editor heading="\'Starter Project\'" link="displayProject.starter"></link-editor> <language-editor heading="\'Language\'" language="displayProject.language"></language-editor> <image-uploader image="displayProject.image"></image-uploader> </div> <div class="col-lg-6"> <header-card title="displayProject.title" description="displayProject.description" image="displayProject.image"> </header-card> </div> </div> </div>'),a.put("components/properties-editor/properties-editor.html",'<div class="pe-heading header"> <h3>{{heading}}</h3> <div class="pe-arrow" ng-click="show=!show"> <i class="icon ion-chevron-down"></i> </div> </div> <div class="pe-properties" ng-show="show"> <div class="row"> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.text.active" class="pe-checkbox"> Text </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.link.active" class="pe-checkbox"> Link </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.code.active" class="pe-checkbox"> Code </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.image.active" class="pe-checkbox"> Image </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.video.active" class="pe-checkbox"> Video </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.hidden.active" class="pe-checkbox"> Help </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.checkmark" class="pe-checkbox"> Self-assess </label> </div> </div> <div ng-if="component.hidden.active"> <div class="pe-hidden-properties"> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.hidden.text.active" class="pe-checkbox"> Text </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.hidden.link.active" class="pe-checkbox"> Link </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.hidden.code.active" class="pe-checkbox"> Code </label> </div> <div class="col-lg-4 col-sm-6"> <label class="pe-label"> <input type="checkbox" ng-model="component.hidden.image.active" class="pe-checkbox"> Image </label> </div> </div> </div> </div>'),a.put("components/resource-card/resource-card.html",'<div class="card"> <piece-display piece="resource"></piece-display> <h5 class="text-xs-center" ng-bind="resource.name"></h5> <p class="lead text-xs-center" ng-bind="resource.description"></p> <div class="card-tags"> <span ng-repeat="tag in resource.tags" class="label label-default"> {{tag.text}} </span> </div> </div>'),a.put("components/step-change/step-change.html",""),a.put("components/step-editor/step-editor.html",'<div class="container editor-container"> <div class="row"> <div class="col-lg-6"> <draft-toggle draft="displayStep.draft"></draft-toggle> <text-editor heading="\'Title\'" text="displayStep.title"></text-editor> <text-editor heading="\'Description\'" text="displayStep.description"></text-editor> <image-uploader image="displayStep.image"></image-uploader> </div> <div class="col-lg-6"> <header-card title="displayStep.title" description="displayStep.description" image="displayStep.image" ng-click="displayStep.component.edit()"> </header-card> </div> </div> </div>'),a.put("components/text-editor/text-editor.html",'<div class="card text-editor"> <dropdown-input class="text-editor-dropdown-input" selected options="text_editor.styles"></dropdown-input> <text-input class="text-editor-text-input" text="text_editor.data.text" format="markdown"></text-input> </div>'),a.put("components/text-input/text-input.html",'<div class="text-input" ui-codemirror="text_input.options" ng-model="text_input.text"> </div>'),a.put("components/video-editor/video-editor.html",'<div class="card editor-card"> <input type="text" class="form-control" placeholder="Video" ng-model="data.video"> <input type="text" class="form-control" placeholder="Label" ng-model="data.label"> </div>'),a.put("views/brick/brick-browser.html",'<div class="brick-interface"> <div class="brick-header"> <span class="header-title"> Brick </span> <ul class="header-tabs"> <li class="nav-link" ui-sref="edit.brick.browser" ui-sref-active="active"> Search </li> <li class="nav-link" ui-sref="edit.brick.editor.browser" ui-sref-active="active"> New </li> </ul> </div> <div class="brick-main container"> <div class="row"> <div class="col-md-4"> <div class="input-group"> <span class="input-group-addon"> Format </span> <dropdown-input class="input-group-btn" selected options="formats"> </dropdown-input> </div> </div> <div class="col-md-8"> <div class="input-group"> <span class="input-group-addon"> <i class="ion-search"></i> </span> <input type="text" class="form-control" placeholder="Search" ng-model="query.search"> </div> </div> </div> <br> <div class="row"> <div class="col-md-12"> <div class="card-columns"> <drag-frame data="brick" channel="brick" ng-repeat="brick in bricks"> <brick-card brick="brick" ng-click="edit_brick(brick)"></brick-card> </drag-frame> </div> </div> </div> </div> </div>'),a.put("views/brick/brick-editor.html",'<div class="container padding"> <div class="row"> <div class="card"> <div class="brick-card" ng-if="!brick.pieces.length"> <div ng-repeat="piece in default_pieces"> <piece-display class="content" piece="piece"></piece-display> </div> </div> <drag-frame data="brick" channel="brick"> <div class="brick-card"> <dropdown-input selected options="formats"></dropdown-input> </div> </drag-frame> <div class="brick-card" ng-if="brick.pieces.length"> <div ng-repeat="piece in brick.pieces track by $index"> <div class="drop-zone" ng-class="drop_zone.style()" ui-on-drop="piece_drop($event,$data,$index)" drop-channel="piece" drag-hover-class="hover"> Insert Piece Here </div> <drag-frame data="piece" channel="piece"> <piece-display piece="piece"></piece-display> </drag-frame> </div> </div> <div class="drop-zone" ng-class="drop_zone.style()" ui-on-drop="piece_drop($event,$data)" drop-channel="piece" drag-hover-class="hover"> Add Piece Here </div> </div> </div> </div>'),a.put("views/brick/brick-viewer.html",'<div class="container padding"> <div class="row"> <drag-frame data="brick"> <brick-card brick="brick" ng-click="brick.click()"></brick-card> </drag-frame> </div> <div class="row" ng-repeat="brick in brick.bricks"> <div class="drop-zone" ng-class="drop_zone.style()" ui-on-drop="brick_drop($event,$data,$index)" drop-channel="brick" drag-hover-class="hover"> Insert Brick Here </div> <drag-frame data="brick" channel="brick"> <brick-card brick="brick" ng-click="brick.click()"></brick-card> </drag-frame> </div> <div class="row"> <div class="drop-zone" ng-class="drop_zone.style()" ui-on-drop="brick_drop($event,$data)" drop-channel="brick" drag-hover-class="hover"> Add Brick Here </div> </div> </div>'),a.put("views/edit/edit.html",'<div class="tile tile-small" ui-view="viewer"></div> <div class="tile tile-large" ui-view="selector"></div>'),a.put("views/home/home.html",'<div class="container"> <div class="row"> <div class="col-md-4" ng-repeat="group in groups"> <h1>{{group.name}}</h1> <h2>{{group.description}}</h2> <ul> <li ng-repeat="brick in group.bricks"> <h3>{{brick.format}}</h3> <button ui-sref="edit.brick.browser({view_brick:brick})">{{brick}}</button> </li> </ul> </div> </div> </div>'),a.put("views/login/login.html",'<div class="container overflow-scroll"> <div class="row padding-vertical"> <div class="col-xs-12"> <div class="alert alert-danger" role="alert" ng-if="login.error.show"> <strong>{{login.error.title}}: </strong> {{login.error.message}} </div> <form ng-submit="login.submit()"> <fieldset class="form-group" ng-if="login.show(\'role\')"> <label for="role">Type of User</label> <select class="form-control" id="role" ng-model="login.user.role"> <option value="student">Student</option> <option value="instructor">Instructor</option> </select> </fieldset> <fieldset class="form-group" ng-if="login.show(\'email\')"> <label for="email">Email Address</label> <input type="email" class="form-control" id="email" ng-model="login.user.email" placeholder="Email Address"> </fieldset> <fieldset class="form-group" ng-if="login.show(\'group\')"> <label for="group">Group</label> <input type="text" class="form-control" id="group" ng-model="login.user.group" placeholder="Group"> <small class="text-muted" ng-if="login.show(\'login\')"> Don\'t have a group? <a href="" ng-click="login.mode(\'login\',\'username\')">Login using a Username</a> </small> </fieldset> <fieldset class="form-group" ng-if="login.show(\'name\')"> <label for="name">Name</label> <input type="text" class="form-control" id="name" ng-model="login.user.name" placeholder="Name"> </fieldset> <fieldset class="form-group" ng-if="login.show(\'username\')"> <label for="username">Username</label> <input type="text" class="form-control" id="username" ng-model="login.user.username" placeholder="Username"> <small class="text-muted" ng-if="login.show(\'login\')"> Don\'t have a username? <a href="" ng-click="login.mode(\'login\',\'group\')">Login using Group and Name</a> </small> <small class="text-muted" ng-if="login.show(\'create\')"> Leave your username blank and we will create one for your from your group and name </small> </fieldset> <fieldset class="form-group"> <label for="password">Password</label> <input type="password" class="form-control" id="password" ng-model="login.user.password" placeholder="Password"> </fieldset> <fieldset class="form-group" ng-if="login.show(\'login\')"> <button type="submit" class="btn btn-primary">Login</button> <small class="text-muted">Don\'t have an account already? <a href="" ng-click="login.mode(\'create\')">Create an Account</a> </small> </fieldset> <fieldset class="form-group" ng-if="login.show(\'create\')"> <button type="submit" class="btn btn-primary">Create an Account</button> <small class="text-muted">Already have an account? <a href="" ng-click="login.mode(\'login\')">Login Here</a> </small> </fieldset> </form> </div> </div> </div>'),a.put("views/resource/resource-browser.html",'<div class="container"> <div class="row"> <div class="col-md-12"> <div class="input-group"> <span class="input-group-addon"><i class="ion-search"></i></span> <input type="text" class="form-control" placeholder="Search" ng-model="query"> </div> <br> </div> </div> <div class="row"> <resource-editor resource="resource"></resource-editor> </div> <div class="row" ng-repeat="resource in resources"> <div class="col-md-12"> <drag-frame data="resource"> <resource-card resource="resource"></resource-card> </drag-frame> </div> </div> </div>'),a.put("views/resource/resource-editor.html",'<div class="container"> <div class="row" ng-if="resource._id"> <div class="col-md-12"> <h4>Preview</h4> </div> <div class="col-md-12"> <drag-frame data="resource" channel="piece"> <resource-card resource="resource"></resource-card> </drag-frame> </div> </div> <div class="row"> <div class="col-md-12"> <h4>Content</h4> </div> <div class="col-md-12"> <text-editor ng-if="resource.format == \'text\'" data="resource.data"> </text-editor> <link-editor ng-if="resource.format == \'link\'" data="resource.data"> </link-editor> <code-editor ng-if="resource.format == \'code\'" data="resource.data"> </code-editor> <image-uploader ng-if="resource.format == \'image\'" callback="save_resource" data="resource.data"> </image-uploader> <video-editor ng-if="resource.format == \'video\'" data="resource.data"> </video-editor> </div> </div> <div class="row"> <div class="col-md-12"> <h4>Meta Data</h4> </div> <div class="col-md-12"> <div class="card editor-card"> <input type="text" class="form-control" placeholder="Name" ng-model="resource.name"> <input type="text" class="form-control" placeholder="Description" ng-model="resource.description"> <tags-input class="tags-input" ng-model="resource.tags"> </tags-input> </div> </div> </div> <div class="row"> <div class="col-md-12"> <button class="btn btn-primary" ng-click="save_resource()">Save</button> </div> </div> </div>'),a.put("views/resource/resource-selector.html",'<div class="tile tile-half"> <div class="brick-interface"> <div class="brick-header"> <span class="header-title"> Brick </span> <ul class="header-tabs"> <li class="nav-link" ui-sref="edit.brick.browser" ui-sref-active="active"> Search </li> <li class="nav-link" ui-sref="edit.brick.editor" ui-sref-active="active"> New </li> </ul> </div> <div class="brick-main"> <div ui-view="brick"></div> </div> </div> </div> <div class="tile tile-half"> <div class="resource-interface"> <div class="resource-header"> <span class="header-title"> Resource </span> <ul class="header-tabs"> <li class="nav-link" ui-sref="edit.brick.editor.browser" ui-sref-active="active"> Search </li> <li class="nav-link" ui-sref="edit.brick.editor.editor" ui-sref-active="active"> New </li> </ul> </div> <div class="resource-main"> <div ui-view="resource"></div> </div> <div class="resource-sidebar"> <div ng-repeat="button in sidebar.buttons"> <div class="sidebar-button" ng-click="button.click()" ng-class="button.style()"> <i ng-class="button.icon"></i> <div ng-bind="button.label"></div> </div> </div> </div> </div> </div>')}]);